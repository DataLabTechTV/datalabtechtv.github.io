<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be? &#183; Data Lab Tech TV</title>
<meta name=title content="LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be? &#183; Data Lab Tech TV"><meta name=description content="Let's learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution."><meta name=keywords content="s3,go,object-store,aws,video,"><link rel=canonical href=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/><link type=text/css rel=stylesheet href=/css/main.bundle.min.36c3cd7950e4533fa7da3150d972e3edf34d07f83c0264ff04cad0969dfdb3b8a7065b0ed6c730c6d34a7bad516cfc6f6a5917ab1fdb10b25f481f8a17b54c16.css integrity="sha512-NsPNeVDkUz+n2jFQ2XLj7fNNB/g8AmT/BMrQlp39s7inBlsO1scwxtNKe61RbPxvalkXqx/bELJfSB+KF7VMFg=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.52b8d61b061c90a738102a0eac69eaa1479fdf5de882a0b0741d7515240617156a6c4477fcc91f9c962062804fe62d2932bb9f57d0aded208c762c2e1ed2e202.js integrity="sha512-UrjWGwYckKc4ECoOrGnqoUef313ogqCwdB11FSQGFxVqbER3/MkfnJYgYoBP5i0pMrufV9Ct7SCMdiwuHtLiAg==" data-copy=Copy data-copied=Copied></script><script src=/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj+Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/"><meta property="og:site_name" content="Data Lab Tech TV"><meta property="og:title" content="LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be?"><meta property="og:description" content="Let's learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-11-11T12:00:00+01:00"><meta property="article:modified_time" content="2025-11-11T12:00:00+01:00"><meta property="article:tag" content="S3"><meta property="article:tag" content="Go"><meta property="article:tag" content="Object-Store"><meta property="article:tag" content="Aws"><meta property="article:tag" content="Video"><meta property="og:image" content="https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/feature.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/feature.jpeg"><meta name=twitter:title content="LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be?"><meta name=twitter:description content="Let's learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be?","headline":"LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be?","description":"Let\u0027s learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution.","abstract":"Summary # Let\u0026rsquo;s learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution.","inLanguage":"en","url":"https:\/\/datalabtechtv.com\/posts\/labstore-part-1-how-hard-can-it-be\/","author":{"@type":"Person","name":"Data Lab Tech"},"copyrightYear":"2025","dateCreated":"2025-11-11T12:00:00\u002b01:00","datePublished":"2025-11-11T12:00:00\u002b01:00","dateModified":"2025-11-11T12:00:00\u002b01:00","keywords":["s3","go","object-store","aws","video"],"mainEntityOfPage":"true","wordCount":"4947"}]</script><meta name=author content="Data Lab Tech"><link href=https://youtube.com/@DataLabTechTV rel=me><link href=https://bsky.app/profile/datalabtechtv.com rel=me><link href=https://github.com/DataLabTechTV rel=me><link href=https://discord.gg/6xpe827ANZ rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQTLJTJJ7T"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied"}),gtag("js",new Date),gtag("config","G-VQTLJTJJ7T",{anonymize_ip:!0,allow_google_signals:!1})</script><script>MathJax={tex:{inlineMath:[["$","$"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js></script><style>.medium-zoom-overlay{background:rgba(0,0,0,.9)!important;z-index:100}.of-wide{width:150%;margin-left:-25%;height:auto}.of-narrow{width:125%;height:auto}</style><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 min-h-[130px] opacity-65 pl-[24px] pr-[24px] bg-gradient-to-b from-neutral from-60% dark:from-neutral-800 to-transparent mix-blend-normal" style=z-index:80></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3"><div><a href=/ class=flex><span class=sr-only>Data Lab Tech TV</span>
<img src=/img/logo.png width=450 height=450 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Data Lab Tech TV"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Data Lab Tech TV</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Blog</p></a><a href=https://youtube.com/@DataLabTechTV target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></span><p class="text-base font-medium" title>YouTube</p></a><a href=https://bsky.app/profile/datalabtechtv.com target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg></span></span><p class="text-base font-medium" title>Bluesky</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Tags</p></a><div><div class="cursor-pointer flex items-center nested-menu"><a class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>Categories
</a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/categories/data-science/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Data Science</p></a><a href=/categories/data-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Data Engineering</p></a><a href=/categories/mlops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>MLOps</p></a><a href=/categories/devops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>DevOps</p></a><a href=/categories/software-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Software Engineering</p></a><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Philosophy of Technology</p></a></div></div></div></div><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div></div><div class="-my-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p></a></li><li class=mt-1><a href=https://youtube.com/@DataLabTechTV target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></div><p class="text-bg font-bg" title>YouTube</p></a></li><li class=mt-1><a href=https://bsky.app/profile/datalabtechtv.com target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg></span></div><p class="text-bg font-bg" title>Bluesky</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Tags</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Categories</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/categories/data-science/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Data Science</p></a></li><li class=mt-1><a href=/categories/data-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Data Engineering</p></a></li><li class=mt-1><a href=/categories/mlops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>MLOps</p></a></li><li class=mt-1><a href=/categories/devops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>DevOps</p></a></li><li class=mt-1><a href=/categories/software-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Software Engineering</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Philosophy of Technology</p></a></li><li class=mb-2></li></ul></div></label></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/background_hu5250322968290309648.png)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-30 dark:opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">LabStore - Part 1 - Building an Object Store in Go: How Hard Can It Be?</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-11-11T12:00:00+01:00>11 November 2025</time><span class="px-2 text-primary-500">&#183;</span><span>4947 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">24 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/software-engineering/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Software Engineering
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/s3/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">S3
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/go/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Go
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/object-store/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Object-Store
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/aws/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Aws
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/video/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Video</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#minio---the-end-of-a-chapter>MinIO - The End of a Chapter</a></li><li><a href=#implementing-an-s3-object-store>Implementing an S3 Object Store</a><ul><li><a href=#-p0--critical>ðŸŸ¥ P0 â€“ Critical</a><ul><li><a href=#buckets>Buckets</a></li><li><a href=#objects>Objects</a></li></ul></li><li><a href=#-p1--high>ðŸŸ§ P1 â€“ High</a><ul><li><a href=#objects-multipart-uploads>Objects: Multipart Uploads</a></li><li><a href=#buckets-configuration>Buckets: Configuration</a></li><li><a href=#iam-identity-and-access-management>IAM: Identity and Access Management</a></li></ul></li><li><a href=#-p2-and--p3>ðŸŸ¨ P2 and ðŸŸ© P3</a></li></ul></li><li><a href=#backend-programming-language>Backend Programming Language</a><ul><li><a href=#why-go>Why Go?</a></li><li><a href=#understanding-the-basics>Understanding the Basics</a><ul><li><a href=#composable-types-and-interfaces>Composable Types and Interfaces</a></li><li><a href=#private-and-public-identifiers>&ldquo;Private&rdquo; and &ldquo;Public&rdquo; Identifiers</a></li><li><a href=#serialization--marshalling--encoding>Serialization / Marshalling / Encoding</a></li><li><a href=#enum-like-constants>Enum-Like Constants</a></li><li><a href=#defining-receiver-methods-for-types>Defining Receiver Methods for Types</a></li><li><a href=#error-handling>Error Handling</a></li><li><a href=#printing-and-logging-conventions>Printing and Logging Conventions</a></li><li><a href=#http-requests-with-nethttp>HTTP Requests with <code>net/http</code></a></li></ul></li></ul></li><li><a href=#the-labstore-project>The LabStore Project</a><ul><li><a href=#project-management-on-github>Project Management on GitHub</a></li><li><a href=#monorepo-structure>Monorepo Structure</a></li><li><a href=#manual-testing-and-benchmarking>Manual Testing and Benchmarking</a></li><li><a href=#final-remarks>Final Remarks</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#minio---the-end-of-a-chapter>MinIO - The End of a Chapter</a></li><li><a href=#implementing-an-s3-object-store>Implementing an S3 Object Store</a><ul><li><a href=#-p0--critical>ðŸŸ¥ P0 â€“ Critical</a><ul><li><a href=#buckets>Buckets</a></li><li><a href=#objects>Objects</a></li></ul></li><li><a href=#-p1--high>ðŸŸ§ P1 â€“ High</a><ul><li><a href=#objects-multipart-uploads>Objects: Multipart Uploads</a></li><li><a href=#buckets-configuration>Buckets: Configuration</a></li><li><a href=#iam-identity-and-access-management>IAM: Identity and Access Management</a></li></ul></li><li><a href=#-p2-and--p3>ðŸŸ¨ P2 and ðŸŸ© P3</a></li></ul></li><li><a href=#backend-programming-language>Backend Programming Language</a><ul><li><a href=#why-go>Why Go?</a></li><li><a href=#understanding-the-basics>Understanding the Basics</a><ul><li><a href=#composable-types-and-interfaces>Composable Types and Interfaces</a></li><li><a href=#private-and-public-identifiers>&ldquo;Private&rdquo; and &ldquo;Public&rdquo; Identifiers</a></li><li><a href=#serialization--marshalling--encoding>Serialization / Marshalling / Encoding</a></li><li><a href=#enum-like-constants>Enum-Like Constants</a></li><li><a href=#defining-receiver-methods-for-types>Defining Receiver Methods for Types</a></li><li><a href=#error-handling>Error Handling</a></li><li><a href=#printing-and-logging-conventions>Printing and Logging Conventions</a></li><li><a href=#http-requests-with-nethttp>HTTP Requests with <code>net/http</code></a></li></ul></li></ul></li><li><a href=#the-labstore-project>The LabStore Project</a><ul><li><a href=#project-management-on-github>Project Management on GitHub</a></li><li><a href=#monorepo-structure>Monorepo Structure</a></li><li><a href=#manual-testing-and-benchmarking>Manual Testing and Benchmarking</a></li><li><a href=#final-remarks>Final Remarks</a></li></ul></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">Summary<div id=summary class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#summary aria-label=Anchor>#</a></span></h2><p>Let&rsquo;s learn all about the inner workings of S3 object stores, along with enough Go to start building your own solution.</p><p>As MinIO distances itself from Open Source Software, losing karma with the community, there&rsquo;s no better time to discover more on how to build our very own S3-compatible object store! So let&rsquo;s delve into the inner workings of the AWS S3 Object Store API, learning the basics of Go, and introducing LabStore, a new project by IllumiKnow Labs, where, together with the community, we&rsquo;ll build yet another OSS solution for object storage, this time ensuring that it remains open and freeâ€”no features removed!</p><p>Embark in this series with IllumiKnow Labs, and let&rsquo;s see where this journey takes us. Hopefully you&rsquo;ll learn a lot along the way!</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%><iframe src="https://www.youtube.com/embed/hwYFlcNJOCw?si=X3tN4t6T_HYEIQ4l" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy=strict-origin-when-cross-origin allowfullscreen style=position:absolute;top:0;left:0;width:100%;height:100%>></iframe></div><h2 class="relative group">MinIO - The End of a Chapter<div id=minio---the-end-of-a-chapter class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#minio---the-end-of-a-chapter aria-label=Anchor>#</a></span></h2><p>MinIO has grown to be loved by the community as the <em>de facto</em> open source solution for on-premise S3 object storage. Unfortunately, more recently they decided to follow a different direction, pushing all their OSS efforts into the background, which has resulted in widely spread negative feedback within the community.</p><p>First, they <a href=https://www.reddit.com/r/selfhosted/comments/1kva3pw/avoid_minio_developers_introduce_trojan_horse/ target=_blank>removed critical features from their UI</a>, which led users like me to keep running older Docker image versions, and others, like the user on <a href=https://www.reddit.com/r/selfhosted/comments/1nf5tam/critical_features_vanished_from_minio_ce_so_i/ target=_blank>this Reddit post</a>, to create an alternative UI that brings back removed features. Unfortunately, the most likely outcome here is that those features will also be removed from the community edition backend in the near future, so this might not be a viable solution for the open source or self-hosting communities.</p><p>Some users also decided to <a href=https://www.reddit.com/r/hackernews/comments/1oebo00/openmaxio_is_a_communitymaintained_fork_of_minio/ target=_blank>create a fork</a>. This is what&rsquo;s great about open sourceâ€”it will remain open as long as someone maintains it. Unfortunately, there are also a few challenges here, regarding trust and fragmentation. First of all, it&rsquo;s likely that multiple forks will appear. Not counting the ones done for archival, personal use, or testing, some of them will also be quickly abandoned. Until we know that there are serious devs behind a fork, and that users are adopting that fork, it will be hard to make a decision. The likely scenario here is that users will simply adopt another alternative for S3 object storage, completely dropping any MinIO-related distribution.</p><p>But it gets worse&mldr; Recently, MinIO decided that their community edition (CE) would be a <a href=https://www.reddit.com/r/minio/comments/1oez7ui/minio_is_sourceonly_now/ target=_blank>source only</a> distribution, scrapping their <a href=https://www.reddit.com/r/selfhosted/comments/1ocggb6/minio_moving_to_a_source_only_distribution/ target=_blank>prebuilt binaries</a> along with their <a href=https://www.reddit.com/r/devops/comments/1ocoacj/minio_did_a_ragpull_on_their_docker_images/ target=_blank>Docker image</a> builds. While it looks like they are keeping older images, they will not be building any new binaries or images for MinIO CE.</p><p>Regarding Docker images, users have been discussing the issue <a href=https://www.reddit.com/r/sysadmin/comments/1ohqomq/minio_stopped_publishing_free_docker_images_which/ target=_blank>here</a> and <a href=https://www.reddit.com/r/selfhosted/comments/1ocggb6/minio_moving_to_a_source_only_distribution/ target=_blank>here</a>, highlighting that, while the community can build their own binaries or images, these might easily be compromised, which is a major breach in trust.</p><p>But it gets even worse&mldr; On top of moving to a source only distribution, they are also <a href=https://github.com/minio/minio/issues/21647#issuecomment-3439134621 target=_blank>ceasing further development</a> apart from bug fixes or security patchesâ€”the community has made notice that MinIO is no longer in <a href=https://www.reddit.com/r/programming/comments/1of8ak4/minio_community_is_not_actively_being_developed/ target=_blank>active development</a>.</p><p>It looks like they are turning their focus away from their original product, and into their newer MinIO AIStor solution, developed on a separate codebase, and offering only a commercial license. I wonder if this strategy will work for them, after losing so much karma with the community. Users are calling it a <a href=https://www.reddit.com/r/minio/comments/1l85s47/what_a_shame_minio_bait_and_switch_leaves/ target=_blank>bait and switch</a>, while progressively <a href=https://www.reddit.com/r/grafana/comments/1ohfiph/current_state_of_minio/ target=_blank>looking for alternatives</a>.</p><p>Of course it will be hard to get an alternative for the new features that AIStor will bring, as this competes directly with <a href=https://aws.amazon.com/s3/features/tables/ target=_blank>Amazon S3 Tables</a>, offering AI/ML lifecycle data management features, along with features to simplify the management of open table formats, like <a href=https://iceberg.apache.org/ target=_blank>Iceberg</a>, <a href=https://hudi.apache.org/ target=_blank>Hudi</a>, or <a href=https://delta.io/ target=_blank>Delta Lake</a>, that support data lakehousesâ€”no DuckLake though ðŸ˜Ÿ.</p><p>In all honesty, direction wise, this is all great! It makes sense. I just don&rsquo;t understand the decision to essentially kill the open source solution. It could easily have been planned to fit their recent goals, and, with little effort, avoid compromising the positive standing they cultivated with the community.</p><p>Regardless, if you&rsquo;re using MinIO, this is the time to make a decision. Either switch to AWS S3 directly, opt to pay for a commercial license, or switch to another alternative. And there are a few, like <a href=https://garagehq.deuxfleurs.fr/ target=_blank>Garage</a>, <a href=https://github.com/seaweedfs/seaweedfs target=_blank>SeaweedFS</a>, <a href=https://github.com/rustfs/rustfs target=_blank>RustFS</a>, or even <a href=https://ceph.com/ target=_blank>Ceph</a> with the <a href=https://docs.ceph.com/en/reef/radosgw/ target=_blank>RADOS gateway</a>. In a future video, we&rsquo;ll test and benchmark these alternatives.</p><h2 class="relative group">Implementing an S3 Object Store<div id=implementing-an-s3-object-store class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#implementing-an-s3-object-store aria-label=Anchor>#</a></span></h2><p>How hard can it be, right? Is it complicated? Not really. Can it get complex? Definitely. SigV4 is extensive and, since it&rsquo;s all hashes, the slightest mistake will produce the wrong signatureâ€”and this is hard to debug, as it&rsquo;s mostly manually checking the code. On top of that, the API is also deceptively simple, with each request making extensive use of HTTP headers, each requiring individual attention.</p><p>Beyond the AWS S3 API, we also need to take a look at IAM, establishing an approach to manage our users, groups, policies, etc. This is not a part of S3, but a requirement for it to work properly. It&rsquo;s easy to implement a root user and work from there, but it&rsquo;s harder if you want proper identity and access management (IAM). We don&rsquo;t have a full plan for this yet, but we&rsquo;ll likely reproduce AWS IAM&rsquo;s requests as well.</p><p>So, what&rsquo;s the fastest path to an <abbr title="Minimum Viable Product">MVP</abbr>? We need to categorize requests, prioritize them, and, for each one, decide on the minimum headers and response elements to make it work. At this stage, we won&rsquo;t be fully compliant with the API, but, to be clear, no one is. Compliance is fractionalâ€”each open source object store will provide a table with the list of supported requests, while completeness details per request won&rsquo;t be provided.</p><p>Let&rsquo;s then plan, based on the following resources:</p><ul><li>AWS Signature Version 4<ul><li><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html target=_blank>https://docs.aws.amazon.com/AmazonS3/latest/API/sig-v4-header-based-auth.html</a></li><li><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-streaming.html target=_blank>https://docs.aws.amazon.com/AmazonS3/latest/API/sigv4-streaming.html</a></li></ul></li><li>AWS Simple Storage Service (S3) - API Reference<ul><li><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_Operations_Amazon_Simple_Storage_Service.html target=_blank>https://docs.aws.amazon.com/AmazonS3/latest/API/API_Operations_Amazon_Simple_Storage_Service.html</a></li></ul></li><li>AWS Identity and Access Management - API Reference<ul><li><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_Operations.html target=_blank>https://docs.aws.amazon.com/IAM/latest/APIReference/API_Operations.html</a></li></ul></li></ul><h3 class="relative group">ðŸŸ¥ P0 â€“ Critical<div id=-p0--critical class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-p0--critical aria-label=Anchor>#</a></span></h3><p>These are the absolute minimal actions required for an object store to do its job. Each request should take an <code>Authorization</code> header with the corresponding SigV4 hash. Here, if it&rsquo;s just a toy project, you can simply ignore that header and accept all requests regardless, but, if you&rsquo;re serious about it, like we are, then implementing SigV4 should be top priority as well.</p><p>So also consider SigV4 to be ðŸŸ¥ P0 â€“ Critical.</p><p>Don&rsquo;t worry about the details on SigV4 now, as I&rsquo;ll write a blog post dedicated to this next week, alongside the customary YouTube video.</p><p>So, top priority should be for bucket and object CRUD, as we can see below. For each S3 Action, we show the method, path, and a basic description below. Each action links to the official documentation as well.</p><h4 class="relative group">Buckets<div id=buckets class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#buckets aria-label=Anchor>#</a></span></h4><table><thead><tr><th>S3 Action</th><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListBuckets.html target=_blank>ListBuckets</a></td><td>GET</td><td><code>/</code></td><td>List all buckets</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_CreateBucket.html target=_blank>CreateBucket</a></td><td>PUT</td><td><code>/{bucket}</code></td><td>Create bucket</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteBucket.html target=_blank>DeleteBucket</a></td><td>DELETE</td><td><code>/{bucket}</code></td><td>Delete bucket</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjects.html target=_blank>ListObjects</a></td><td>GET</td><td><code>/{bucket}</code></td><td>List objects in bucket</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjectsV2.html target=_blank>ListObjectsV2</a></td><td>GET</td><td><code>/{bucket}?list-type=2</code></td><td>List objects in bucket (V2)</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadBucket.html target=_blank>HeadBucket</a></td><td>HEAD</td><td><code>/{bucket}</code></td><td>Check bucket existence</td></tr></tbody></table><h4 class="relative group">Objects<div id=objects class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#objects aria-label=Anchor>#</a></span></h4><table><thead><tr><th>S3 Action</th><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutObject.html target=_blank>PutObject</a></td><td>PUT</td><td><code>/{bucket}/{key}</code></td><td>Upload an object</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetObject.html target=_blank>GetObject</a></td><td>GET</td><td><code>/{bucket}/{key}</code></td><td>Download an object</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_HeadObject.html target=_blank>HeadObject</a></td><td>HEAD</td><td><code>/{bucket}/{key}</code></td><td>Get metadata</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteObject.html target=_blank>DeleteObject</a></td><td>DELETE</td><td><code>/{bucket}/{key}</code></td><td>Delete an object</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_CopyObject.html target=_blank>CopyObject</a></td><td>PUT</td><td><code>/{bucket}/{key}?x-amz-copy-source=...</code></td><td>Copy object</td></tr></tbody></table><h3 class="relative group">ðŸŸ§ P1 â€“ High<div id=-p1--high class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-p1--high aria-label=Anchor>#</a></span></h3><p>Once we get our object store doing basic authenticated bucket and object CRUD, we&rsquo;ll then focus on implementing multipart uploads, so we can upload large objects using multiple parallel requests, and then implementing IAM, covering bucket ACL and policy configuration, as well as the actual API to manage users, groups, policies, etc.</p><p>In the following sections, we cover the requests that we found to be the most relevant for each item.</p><h4 class="relative group">Objects: Multipart Uploads<div id=objects-multipart-uploads class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#objects-multipart-uploads aria-label=Anchor>#</a></span></h4><table><thead><tr><th>S3 Action</th><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListMultipartUploads.html target=_blank>ListMultipartUploads</a></td><td>GET</td><td><code>/{bucket}?uploads</code></td><td>List ongoing multipart uploads</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_CreateMultipartUpload.html target=_blank>CreateMultipartUpload</a></td><td>POST</td><td><code>/{bucket}/{key}?uploads</code></td><td>Initiate upload</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_UploadPart.html target=_blank>UploadPart</a></td><td>PUT</td><td><code>/{bucket}/{key}?partNumber={n}&amp;uploadId={id}</code></td><td>Upload part</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListParts.html target=_blank>ListParts</a></td><td>GET</td><td><code>/{bucket}?uploadId={id}</code></td><td>List parts</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_CompleteMultipartUpload.html target=_blank>CompleteMultipartUpload</a></td><td>POST</td><td><code>/{bucket}/{key}?uploadId={id}</code></td><td>Complete upload</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_AbortMultipartUpload.html target=_blank>AbortMultipartUpload</a></td><td>DELETE</td><td><code>/{bucket}/{key}?uploadId={id}</code></td><td>Abort upload</td></tr></tbody></table><h4 class="relative group">Buckets: Configuration<div id=buckets-configuration class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#buckets-configuration aria-label=Anchor>#</a></span></h4><table><thead><tr><th>S3 Action</th><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketAcl.html target=_blank>GetBucketAcl</a> / <a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketAcl.html target=_blank>PutBucketAcl</a></td><td>GET/PUT</td><td><code>/{bucket}?acl</code></td><td>User/group permissions</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketPolicy.html target=_blank>GetBucketPolicy</a> / <a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_PutBucketPolicy.html target=_blank>PutBucketPolicy</a> / <a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_DeleteBucketPolicy.html target=_blank>DeleteBucketPolicy</a></td><td>GET/PUT/DELETE</td><td><code>/{bucket}?policy</code></td><td>IAM-style JSON policy</td></tr><tr><td><a href=https://docs.aws.amazon.com/AmazonS3/latest/API/API_GetBucketPolicyStatus.html target=_blank>GetBucketPolicyStatus</a></td><td>GET</td><td><code>/{bucket}?policyStatus</code></td><td>Check if the bucket is public</td></tr></tbody></table><h4 class="relative group">IAM: Identity and Access Management<div id=iam-identity-and-access-management class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#iam-identity-and-access-management aria-label=Anchor>#</a></span></h4><table><thead><tr><th>IAM Action</th><th>Method</th><th>Path</th><th>Description</th></tr></thead><tbody><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateUser.html target=_blank>CreateUser</a></td><td>POST</td><td><code>/?Action=CreateUser</code></td><td>Create user (no password / can&rsquo;t login)</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateLoginProfile.html target=_blank>CreateLoginProfile</a></td><td>POST</td><td><code>/?Action=CreateLoginProfile</code></td><td>Set password for user (can login)</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateAccessKey.html target=_blank>CreateAccessKey</a></td><td>POST</td><td><code>/?Action=CreateAccessKey</code></td><td>Create user access key (API only auth / can&rsquo;t use for login)</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_ListUsers.html target=_blank>ListUsers</a></td><td>POST</td><td><code>/?Action=ListUsers</code></td><td>List users for a path prefix</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_GetUser.html target=_blank>GetUser</a></td><td>POST</td><td><code>/?Action=GetUser</code></td><td>Get user by name</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteUser.html target=_blank>DeleteUser</a></td><td>POST</td><td><code>/?Action=DeleteUser</code></td><td>Delete user by username</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_CreateGroup.html target=_blank>CreateGroup</a></td><td>POST</td><td><code>/?Action=CreateGroup</code></td><td>Create group</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_AddUserToGroup.html target=_blank>AddUserToGroup</a></td><td>POST</td><td><code>/?Action=AddUserToGroup</code></td><td>Add user to group using names</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_ListGroups.html target=_blank>ListGroups</a></td><td>POST</td><td><code>/?Action=ListGroups</code></td><td>List groups for a path prefix</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_ListGroupsForUser.html target=_blank>ListGroupsForUser</a></td><td>POST</td><td><code>/?Action=ListGroupsForUser</code></td><td>List groups for a given user</td></tr><tr><td><a href=https://docs.aws.amazon.com/IAM/latest/APIReference/API_DeleteGroup.html target=_blank>DeleteGroup</a></td><td>POST</td><td><code>/?Action=DeleteGroup</code></td><td>Delete group by name</td></tr></tbody></table><h3 class="relative group">ðŸŸ¨ P2 and ðŸŸ© P3<div id=-p2-and--p3 class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#-p2-and--p3 aria-label=Anchor>#</a></span></h3><p>Lower priority requests will include actions covering:</p><ul><li>Bucket versioning, encryption, object locking, and CORS.</li><li>Bucket configurations covering lifecycle, replication, logging, notification, metrics, etc.</li><li>Other object-related actions, like copying parts from existing objects during multipart uploads, tagging, setting retention policies, etc.</li><li>Other IAM-related actions, like attaching global policies to users or groups, etc.</li></ul><h2 class="relative group">Backend Programming Language<div id=backend-programming-language class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#backend-programming-language aria-label=Anchor>#</a></span></h2><p>Long story short, the backend will be written in Go. As this is my first time coding in Go, I&rsquo;ll document a lot of what I learned over the past two weeks, and share it with you. First, I&rsquo;ll go through the decision making process that led me to pick Go over Rustâ€”and no, there is no clear &ldquo;winner&rdquo;, just a best option for my use case. Then, I&rsquo;ll cover several basic language features that are fundamental knowledge if you&rsquo;re starting to code in Go right now. Hopefully, this works a good primer to get you started in Go as well.</p><h3 class="relative group">Why Go?<div id=why-go class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#why-go aria-label=Anchor>#</a></span></h3><p>When selecting the language to code the backend, it was between Go and Rust. To be honest, I looked at Go&rsquo;s syntax and it felt downright weird.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nf>f</span><span class=p>();</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=c1>// ...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=kd>map</span><span class=p>[</span><span class=kt>string</span><span class=p>]</span><span class=kt>int</span> <span class=nx>m</span>
</span></span><span class=line><span class=cl><span class=kd>var</span> <span class=nx>y</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>x</span> <span class=o>:=</span> <span class=mi>10</span>
</span></span><span class=line><span class=cl><span class=nx>y</span> <span class=p>=</span> <span class=mi>20</span>
</span></span></code></pre></div><p>Two statements in the <code>if</code> condition? Why are map types declared this way? Are there two assignment operators? What?!</p><p>Rust felt complex, but not weird, at least to me. And, on the other hand, we all know how efficient tools coded in Rust can beâ€”<code>uv</code>, <code>just</code>, <code>ripgrep</code>, <code>bat</code>, <code>fd</code>, <code>exa</code>, and the list goes one. So, at first, I was leaning towards Rust.</p><p>Why did I end up picking Go then? And do I regret it? No regrets here! Let me tell you why.</p><p>First, about the syntax, the weirdness goes away quite fast. Go is consistent. It&rsquo;s also minimalistic, and it flows quite well as you type.</p><p>The two statements in the <code>if</code> condition are just like the ones in a <code>for</code> loop: initialization and condition. Neat, right?</p><p>Regarding map declaration, because Go didn&rsquo;t implement generics originally, this is how to &ldquo;return type&rdquo; for maps is declared, and this is consistently followed for functions as well: <code>func GetMapItem(...) int</code>. Again, consistency!</p><p>Why the two assignment operators? Notice that <code>y</code> was declared, but <code>x</code> wasn&rsquo;t. When we use <code>:=</code>, we&rsquo;re declaring on assignment, and the compiler will determine the correct variable type at that stage. Conversely, you use <code>=</code> when you&rsquo;re assigning an existing variable. This keeps the code readable and minimalistic.</p><p>Also, while I won&rsquo;t cover these below, goroutines and channels are a native feature of the language, approaching concurrency in a beautiful way. Watch <a href=https://youtu.be/oV9rvDllKEg target=_blank>Concurrency is not Parallelism by Rob Pike</a> for a few cool examples!</p><p>The video above was recommended by the community on a Reddit post somewhere. I also had separate discussions on other topics, like <code>net/http</code> versus other web frameworks, so thanks for that! As a first impression, the community seems nice and helpfulâ€”there are a few tech savvy and professional members around as well. This is fundamental for the success of a languageâ€”Python is a good example of this.</p><p>Finally, let&rsquo;s talk tooling. Compilation time is the fastest I&rsquo;ve ever seen. I can compile and run my whole backend faster than I can print the help message for <a href=https://github.com/DataLabTechTV/datalab target=_blank>datalab</a>&rsquo;s <code>dlctl</code> command, which is written in Python! WAT! There is <code>go fmt</code> to format my code. I can install system commands directly using <code>go install</code>, add project dependencies using <code>go get</code>, or cleanup unused dependencies by using <code>go mod tidy</code>. These dependencies are all listed under <a href=https://pkg.go.dev/ target=_blank>pkg.go.dev</a>â€”at least I haven&rsquo;t found any that aren&rsquo;t yetâ€”with documentation available straight in Go&rsquo;s main domain.</p><p>What would have I lost by going the Rust route? More time learning the language, debugging the code, or interpreting compiler errors, more time waiting for the compiler to run, more time installing dependencies and reading their docs, etc. In essence, I would have traded development time for performance. There is a reason the compiler is so strict in Rust. It&rsquo;s doing so much upfront! And there is not garbage collector in Rust, but we have one in Go. However, development is not all about how efficient your code is, but also about how easily you can find coders for your language, how fast you can iterate over your code, and how fast you can deliver a working product.</p><p>The beauty of it all is that you can later refactor the slowest parts of your Go code to run in Rust, if you really can&rsquo;t squeeze any more performance out of Go. I&rsquo;d say that most projects can&rsquo;t go wrong with Go. On the other hand, I&rsquo;d consider carefully when to use Rust.</p><h3 class="relative group">Understanding the Basics<div id=understanding-the-basics class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#understanding-the-basics aria-label=Anchor>#</a></span></h3><p>There are so many lessons or tutorials teaching Go, so I won&rsquo;t do that. Instead I&rsquo;ll cover a few of the basic language features by giving my impression on them. I want to capture more of how they feel, rather than delve deep into details. So I&rsquo;ll compare a bit with other languages I&rsquo;ve used in the past, or cover details that usually don&rsquo;t come up that much, like function suffixes or other conventions.</p><h4 class="relative group">Composable Types and Interfaces<div id=composable-types-and-interfaces class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#composable-types-and-interfaces aria-label=Anchor>#</a></span></h4><p>Let&rsquo;s begin with the basics: composition!</p><p>You can define composed types as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Response</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>statusCode</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>	<span class=nx>Message</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>ErrorResponse</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>Response</span>
</span></span><span class=line><span class=cl>	<span class=nx>ErrorCode</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>UserSession</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>UserID</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nx>Token</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>LoginSuccessResponse</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>Response</span>
</span></span><span class=line><span class=cl>	<span class=nx>Data</span> <span class=nx>UserSession</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>And it&rsquo;s similar for interfaces:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Responder</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>Body</span><span class=p>()</span> <span class=kt>string</span>
</span></span><span class=line><span class=cl>	<span class=nf>Log</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>type</span> <span class=nx>DataResponder</span> <span class=kd>interface</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>Responder</span>
</span></span><span class=line><span class=cl>	<span class=nf>Data</span><span class=p>()</span> <span class=nx>any</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>If you&rsquo;re coming from Scala, this is a bit like traits, but without the need for <code>extends... with...</code>, which provides a weaker consistency syntax. If you&rsquo;re coming from Python, this is like multiple-inheritanceâ€”using mixinsâ€”but without initialization dilemmas:</p><ul><li>Do I use <code>super().__init__(**kwargs)</code>?</li><li>Or just break composability and call <code>MixinA.__init__(arg1, kwarg1=...)</code>?</li></ul><p>If you&rsquo;re coming from TypeScript, this is like the <code>&</code> operator for type composition, although for multiple-inheritance of methods it can get harder in TypeScript, as there&rsquo;s no native support there.</p><h4 class="relative group">&ldquo;Private&rdquo; and &ldquo;Public&rdquo; Identifiers<div id=private-and-public-identifiers class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#private-and-public-identifiers aria-label=Anchor>#</a></span></h4><p>In Go, identifier case matters. We use <code>camelCase</code> identifiers for private/unexported variablesâ€”accessible from inside the packageâ€”and <code>PascalCase</code> for public/exported variablesâ€”accessible from anywhere. Notice that unexported/exported is the preferred naming. There are really no private or public identifiers in Go.</p><p>In the example from the previous section, we kept <code>statusCode</code> as unexported, since it will be used to set the HTTP status code, but it won&rsquo;t be included in the response body, which brings us to he next section&mldr;</p><h4 class="relative group">Serialization / Marshalling / Encoding<div id=serialization--marshalling--encoding class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#serialization--marshalling--encoding aria-label=Anchor>#</a></span></h4><p>In Go, standard encoders, like <code>encoding/json</code>, <code>encoding/xml</code>, or <code>encoding/gob</code>, don&rsquo;t export <code>camelCase</code> variablesâ€”and, by the way, <code>gob</code> is to Go what <code>pickle</code> is to Python.</p><p>Another useful feature that Go provides is annotations besides <code>struct</code> fields. These are called tags. They are often used by encoding libraries to set the field&rsquo;s output name, default value, or exclusion rules.</p><p>Here&rsquo;s an example, where <code>UserID</code> will be encoded as <code>id</code> in the corresponding JSON object, and <code>Token</code>, despite being an exported field, will be excluded from encoding:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>type</span> <span class=err>UserSession</span> <span class=err>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=err>UserID</span> <span class=err>string</span> <span class=err>`json:</span><span class=nt>&#34;id&#34;</span><span class=err>`</span>
</span></span><span class=line><span class=cl>	<span class=err>Token</span>  <span class=err>string</span> <span class=err>`json</span><span class=p>:</span><span class=s2>&#34;-&#34;</span><span class=err>`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>The encoding process will look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>session</span> <span class=o>:=</span> <span class=nx>UserSession</span><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>UserID</span><span class=p>:</span> <span class=s>&#34;034597ff-f083-41b0-aa6b-2cd1fea83a5d&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>Token</span><span class=p>:</span> <span class=s>&#34;5521f71d5ee3150fbba9ecbbfee7517feadffd65784f8f257a92bca6d56bf41b&#34;</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=nx>data</span><span class=p>,</span> <span class=nx>_</span> <span class=o>:=</span> <span class=nx>json</span><span class=p>.</span><span class=nf>Marshal</span><span class=p>(</span><span class=nx>session</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nb>string</span><span class=p>(</span><span class=nx>data</span><span class=p>))</span>  <span class=c1>// {&#34;id&#34;: &#34;034597ff-f083-41b0-aa6b-2cd1fea83a5d&#34;}
</span></span></span></code></pre></div><p>Notice that, when calling <code>json.Marshal</code>, we discarded the second element of the return value, but we shouldn&rsquo;t haveâ€”this returns an error, which we should handle explicitly, but more on that below.</p><h4 class="relative group">Enum-Like Constants<div id=enum-like-constants class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#enum-like-constants aria-label=Anchor>#</a></span></h4><p>Another interesting feature in Go is <code>iota</code>, which we can use to produce enum-like constants with sequential integer values. It is recommended that these constants are typed explicitly.</p><p>Here&rsquo;s an example for an enum starting from 1:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>Status</span> <span class=kt>int</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>const</span> <span class=p>(</span>
</span></span><span class=line><span class=cl>        <span class=nx>_</span> <span class=p>=</span> <span class=kc>iota</span>
</span></span><span class=line><span class=cl>        <span class=nx>Starting</span> <span class=nx>Status</span>
</span></span><span class=line><span class=cl>        <span class=nx>Running</span>
</span></span><span class=line><span class=cl>        <span class=nx>Failed</span>
</span></span><span class=line><span class=cl>        <span class=nx>Success</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span></code></pre></div><p>Notice we assign <code>iota</code> to <code>_</code>, so we discard the initial value, which is zero. We could have used arithmetic as well:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>const</span> <span class=nx>Starting</span> <span class=nx>Status</span> <span class=p>=</span> <span class=kc>iota</span> <span class=o>+</span> <span class=mi>1</span>
</span></span></code></pre></div><p>If a function then takes an argument with type <code>Status</code>, we know it will refer to one of these constants:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>StatusDescription</span><span class=p>(</span><span class=nx>Status</span> <span class=nx>s</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>switch</span> <span class=nx>s</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Starting</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Process is starting...&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Process is running...&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Failed</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Error: process has failed!&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Success</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Success: process completed without errors.&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>default</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;[INVALID STATUS]&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>But, unlike enums in other languages, it can still take regular integers as arguments:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nf>StatusDescription</span><span class=p>(</span><span class=nx>Starting</span><span class=p>)</span>  <span class=c1>// Process is starting...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>StatusDescription</span><span class=p>(</span><span class=mi>1000</span><span class=p>)</span>      <span class=c1>// [INVALID STATUS]
</span></span></span></code></pre></div><h4 class="relative group">Defining Receiver Methods for Types<div id=defining-receiver-methods-for-types class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#defining-receiver-methods-for-types aria-label=Anchor>#</a></span></h4><p>Using the previous example, we could have defined the description function as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>s</span> <span class=nx>Status</span><span class=p>)</span> <span class=nf>Description</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>switch</span> <span class=nx>s</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Starting</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Process is starting...&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Running</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Process is running...&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Failed</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Error: process has failed!&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>case</span> <span class=nx>Success</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;Success: process completed without errors.&#34;</span>
</span></span><span class=line><span class=cl>	<span class=k>default</span><span class=p>:</span>
</span></span><span class=line><span class=cl>		<span class=k>return</span> <span class=s>&#34;[INVALID STATUS]&#34;</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Adding <code>(s Status)</code> before the function name turns it into a receiver method on <code>Status</code>â€”it&rsquo;s kinda like <code>self</code> on Python, but you can give it a custom name, and it works with pointers as well.</p><p>This way, we would call it as:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>Starting</span><span class=p>.</span><span class=nf>Description</span><span class=p>()</span>          <span class=c1>// Process is starting...
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=nf>Status</span><span class=p>(</span><span class=mi>1000</span><span class=p>).</span><span class=nf>Description</span><span class=p>()</span>      <span class=c1>// [INVALID STATUS]
</span></span></span></code></pre></div><h4 class="relative group">Error Handling<div id=error-handling class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#error-handling aria-label=Anchor>#</a></span></h4><p>No exceptions, only errors&mldr; Or panic! Ideally, you handle your errors, but sometimes you might want to print a message and exit immediately. You can do that by with:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nb>panic</span><span class=p>(</span><span class=s>&#34;Oh no!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nx>log</span><span class=p>.</span><span class=nf>Fatal</span><span class=p>(</span><span class=s>&#34;Oh no! But logged.&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>Of course handling the error is betterâ€”and don&rsquo;t just ignore it either. Here are a few insights into errors in Go:</p><ul><li>Messages should be lower case, for composability (i.e., combining error messages).<ul><li><code>errors.New</code> produces a basic error from a message</li></ul></li><li>You can use your own custom error types, as long as you implement the <code>error</code> interface, which is native to Go.<ul><li><code>errors.Is</code> checks for a custom error type.</li><li><code>errors.As</code> casts and error into a custom error type.</li><li>There&rsquo;s no need for <code>errors.Is</code> when using <code>errors.As</code>, since it returns <code>false</code> when it doesn&rsquo;t match.</li></ul></li><li>Combining error messages is called wrapping and can be done with <code>fmt.Errorf</code> and <code>%w</code>.</li><li>Even if there is <code>panic</code>, it can still be intercepted with <code>recover</code> when needed.</li></ul><p>For example, we currently define the following custom error type for LabStore:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>type</span> <span class=nx>S3Error</span> <span class=kd>struct</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nx>XMLName</span>    <span class=nx>xml</span><span class=p>.</span><span class=nx>Name</span> <span class=s>`xml:&#34;Error&#34;`</span>
</span></span><span class=line><span class=cl>        <span class=nx>Code</span>       <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>Message</span>    <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>RequestId</span>  <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>HostId</span>     <span class=kt>string</span>
</span></span><span class=line><span class=cl>        <span class=nx>StatusCode</span> <span class=kt>int</span> <span class=s>`xml:&#34;-&#34;`</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=p>(</span><span class=nx>e</span> <span class=o>*</span><span class=nx>S3Error</span><span class=p>)</span> <span class=nf>Error</span><span class=p>()</span> <span class=kt>string</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=nx>fmt</span><span class=p>.</span><span class=nf>Sprintf</span><span class=p>(</span><span class=s>&#34;%s: %s&#34;</span><span class=p>,</span> <span class=nx>e</span><span class=p>.</span><span class=nx>Code</span><span class=p>,</span> <span class=nx>e</span><span class=p>.</span><span class=nx>Message</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>err</span> <span class=o>:=</span> <span class=o>&amp;</span><span class=nx>S3Error</span><span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>Code</span><span class=p>:</span>       <span class=s>&#34;NotImplemented&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>Message</span><span class=p>:</span>    <span class=s>&#34;Operation not implemented&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>	<span class=nx>StatusCode</span><span class=p>:</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusNotImplemented</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>We can wrap it as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>fmt</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;server error: %w&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>))</span>
</span></span></code></pre></div><p>And handle it among other regular or custom errors as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>HandleError</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>err</span> <span class=kt>error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nx>logrus</span><span class=p>.</span><span class=nf>Errorf</span><span class=p>(</span><span class=s>&#34;Server error: %s&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=kd>var</span> <span class=nx>s3Error</span> <span class=o>*</span><span class=nx>S3Error</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>errors</span><span class=p>.</span><span class=nf>As</span><span class=p>(</span><span class=nx>err</span><span class=p>,</span> <span class=o>&amp;</span><span class=nx>s3Error</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nf>WriteXML</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>s3Error</span><span class=p>.</span><span class=nx>StatusCode</span><span class=p>,</span> <span class=nx>s3Error</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>http</span><span class=p>.</span><span class=nf>Error</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>err</span><span class=p>.</span><span class=nf>Error</span><span class=p>(),</span> <span class=nx>http</span><span class=p>.</span><span class=nx>StatusInternalServerError</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>If one of the libraries you use calls <code>panic</code>, but you want to handle it rather than exiting:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>PanicRequest</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>panic</span><span class=p>(</span><span class=s>&#34;oh no!&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>HandlePanic</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>if</span> <span class=nx>err</span> <span class=o>:=</span> <span class=nb>recover</span><span class=p>();</span> <span class=nx>err</span> <span class=o>!=</span> <span class=kc>nil</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=nx>log</span><span class=p>.</span><span class=nf>Printf</span><span class=p>(</span><span class=s>&#34;Panic recovered: %s&#34;</span><span class=p>,</span> <span class=nx>err</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>PanicDemo</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>defer</span> <span class=nf>HandlePanic</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nf>PanicRequest</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;NOT PRINTED&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=nf>PanicDemo</span><span class=p>()</span>
</span></span><span class=line><span class=cl>	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;PRINTED&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>When <code>panic</code> occurs inside <code>PanicDemo()</code>, the function will still return immediately, triggering <code>HandlePanic()</code>, which will <code>recover</code> from panic, log the error, and resume the program cleanly. This means that, any lines after <code>PanicDemo()</code> on <code>main()</code> will still run. This is useful for instance when you&rsquo;re building your own HTTP service and need to make sure a request that produces panic will never shutdown the whole server.</p><h4 class="relative group">Printing and Logging Conventions<div id=printing-and-logging-conventions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#printing-and-logging-conventions aria-label=Anchor>#</a></span></h4><p>When using libraries that print messages, be it <code>fmt</code> or <code>logrus</code>, there are a few common suffixes (or lack thereof) that are used.</p><p>Here are a few examples based on <code>fmt</code> and <code>logrus</code>:</p><ul><li>No suffix â€” <code>fmt.Print</code>, <code>fmt.Sprint</code>, <code>logrus.Info</code>, <code>logrus.Debug</code><ul><li>Concatenates all arguments, <strong>without spaces</strong>, using <code>%v</code> to produce the string representation.</li></ul></li><li><code>ln</code> suffix â€” <code>fmt.Println</code>, <code>fmt.Sprintln</code>, <code>logrus.Infoln</code>, <code>logrus.Debugln</code><ul><li>Concatenates all arguments, <strong>separated by spaces</strong>, using <code>%v</code> to produce the string representation.</li></ul></li><li><code>f</code> suffix â€” <code>fmt.Printf</code>, <code>fmt.Sprintf</code>, <code>logrus.Infof</code>, <code>logrus.Debugf</code><ul><li>Takes a format string (e.g., <code>"Error: %v"</code>) and as many additional arguments as format verbs (one for <code>%v</code>, in this example).</li></ul></li><li><code>Fn</code> suffix â€” <code>logrus.InfoFn</code>, <code>logrus.DebugFn</code><ul><li>Not a Go convent. This one is mostly specific to <code>logrus</code>, so that a helper function can be used to log more complex workflows by returning an array of string.</li></ul></li></ul><h4 class="relative group">HTTP Requests with <code>net/http</code><div id=http-requests-with-nethttp class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#http-requests-with-nethttp aria-label=Anchor>#</a></span></h4><p>This one was hard on me. I started building LabStore with <code>net/http</code>, but, as I was feeling that routing was a bit too painful, I decided to search for a better alternative. And what better way to do so than to look for a good benchmark? The old scientific methodâ€”experimentation!</p><p>So I found this <a href=https://github.com/smallnest/go-web-framework-benchmark target=_blank>2022 benchmark</a>, where <a href=https://gofiber.io/ target=_blank>Fiber</a> was the clear all-around winner. It was able to handle 28% more requests per second than <code>net/http</code>, while allocating 87.5% less memory, for 5000 concurrent requests. It really stood ou on that benchmark! Since it was based on a different library called <a href=https://github.com/valyala/fasthttp target=_blank>fasthttp</a>, and not <code>net/http</code>, like most of the other frameworks, it was settled, I was going to migrate to <code>fiber</code>.</p><p>Before taking a few days break, did the migration, and it was working fine. Then, as I was resting, I was browsing the <a href=https://www.reddit.com/r/golang/ target=_blank>r/golang</a> subreddit and found a post of someone trying to find a popular web framework to use. The most upvoted comment suggested using <code>net/http</code>, so I decided to add up to the discussion and talk about <code>fiber</code>, as I had just successfully done the migration a couple of days back. This led to a long discussion, culminating in an upset stomach, because I felt I had made a mistake by jumping the gun on migrating out of <code>net/http</code>.</p><p>Even though <code>fiber</code> had better numbers on benchmarks, my main reason to switch was because I needed a router, which I thought needed to be a third-party library, like <a href=https://pkg.go.dev/github.com/julienschmidt/httprouter target=_blank>httprouter</a>, but I quickly realized that <code>net/http</code> has its own router, called <code>http.ServeMux</code>. Now, I avoid premature optimizations, after many lessons learned in the past. More often than not, the best optimizations are done by refactoring your own code for performance. Of course the libraries you use and the language your software is written with matter, but not as much as your implementation.</p><p>That was enough to convince me I had wasted my time migrating, but not enough to convince me I was not better of with <code>fiber</code>â€”after all, it was more efficient. Still, annoyed at my mistake, I decided to look for more up-to-date benchmarks. After all, 3 years had passed and a lot could have changed. So I found a <a href=https://medium.com/deno-the-complete-reference/go-gin-vs-fiber-vs-echo-how-much-performance-difference-is-really-there-for-a-real-world-use-1ed29d6a3e4d target=_blank>2024 benchmark</a> where they compared Fiber with Gin and Echo, both of which only slightly less efficiently than <code>net/http</code>, as they add features on top of it. While Fiber was still the winner in this benchmark, this time the numbers showed a smaller improvement of 5-6% in requests per second and of 14-24% less allocated memory.</p><p>So, being Fiber still the winner, albeit by a lower margin on the 2024 benchmark, why did I go back to <code>net/http</code>? It all came down to RFC compliance. Since we&rsquo;re building an object store, which relies heavily on correctness to compute its authorization header based on SigV4, we couldn&rsquo;t risk that a non-compliant <code>fasthttp</code> implementation broke our backend. Furthermore, by staying with <code>net/http</code> we are able to tap into the ecosystem for other interoperable libraries, if we so require. And any optimizations to <code>net/http</code> in future versions of Go will also reflect in improved performance for our code. On Reddit, someone claimed to handle 100k requests per second with <code>net/http</code>, so I see no reason to be worried about my choice.</p><p>I ended up migrating back to <code>net/http</code>, using <code>http.ServeMux</code> as my router, and it worked fine. Bucket and object routes, however, required URL normalization by trimming the last slash. For example, to ensure both of these routes work:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=nx>mux</span><span class=p>.</span><span class=nf>Handle</span><span class=p>(</span><span class=s>&#34;GET /{bucket}&#34;</span><span class=p>,</span> <span class=nx>middleware</span><span class=p>.</span><span class=nf>WithIAM</span><span class=p>(</span><span class=nx>iam</span><span class=p>.</span><span class=nx>ListBucket</span><span class=p>,</span> <span class=nx>http</span><span class=p>.</span><span class=nf>HandlerFunc</span><span class=p>(</span><span class=nx>bucket</span><span class=p>.</span><span class=nx>ListObjectsHandler</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>mux</span><span class=p>.</span><span class=nf>Handle</span><span class=p>(</span><span class=s>&#34;GET /{bucket}/{key...}&#34;</span><span class=p>,</span> <span class=nx>middleware</span><span class=p>.</span><span class=nf>WithIAM</span><span class=p>(</span><span class=nx>iam</span><span class=p>.</span><span class=nx>GetObject</span><span class=p>,</span> <span class=nx>http</span><span class=p>.</span><span class=nf>HandlerFunc</span><span class=p>(</span><span class=nx>object</span><span class=p>.</span><span class=nx>GetObjectHandler</span><span class=p>)))</span>
</span></span></code></pre></div><p>Without the following middleware, only the second route would be matched, as <code>{key...}</code> can match an empty path:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-go data-lang=go><span class=line><span class=cl><span class=kd>func</span> <span class=nf>NormalizeMiddleware</span><span class=p>(</span><span class=nx>next</span> <span class=nx>http</span><span class=p>.</span><span class=nx>Handler</span><span class=p>)</span> <span class=nx>http</span><span class=p>.</span><span class=nx>Handler</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>	<span class=k>return</span> <span class=nx>http</span><span class=p>.</span><span class=nf>HandlerFunc</span><span class=p>(</span><span class=kd>func</span><span class=p>(</span><span class=nx>w</span> <span class=nx>http</span><span class=p>.</span><span class=nx>ResponseWriter</span><span class=p>,</span> <span class=nx>r</span> <span class=o>*</span><span class=nx>http</span><span class=p>.</span><span class=nx>Request</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>		<span class=k>if</span> <span class=nx>r</span><span class=p>.</span><span class=nx>URL</span><span class=p>.</span><span class=nx>Path</span> <span class=o>!=</span> <span class=s>&#34;/&#34;</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>			<span class=nx>r</span><span class=p>.</span><span class=nx>URL</span><span class=p>.</span><span class=nx>Path</span> <span class=p>=</span> <span class=nx>strings</span><span class=p>.</span><span class=nf>TrimRight</span><span class=p>(</span><span class=nx>r</span><span class=p>.</span><span class=nx>URL</span><span class=p>.</span><span class=nx>Path</span><span class=p>,</span> <span class=s>&#34;/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>		<span class=p>}</span>
</span></span><span class=line><span class=cl>		<span class=nx>next</span><span class=p>.</span><span class=nf>ServeHTTP</span><span class=p>(</span><span class=nx>w</span><span class=p>,</span> <span class=nx>r</span><span class=p>)</span>
</span></span><span class=line><span class=cl>	<span class=p>})</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>We&rsquo;ll likely need to update this with a more elaborate logic in the future, as query parameters come into play, but for now it works. And, of course, we can always replace <code>http.ServeMux</code> with a better multiplexer, and we have a wide list to pick from, since we are now working within the ecosystem.</p><p>If you&rsquo;re interested in learning more about <code>net/http</code>, I suggest you take a look at the following video by Dreams of Code on YouTube: <a href="https://www.youtube.com/watch?v=H7tbjKFSg58" target=_blank>The standard library now has all you need for advanced routing in Go.</a>. This helped me get started quite easily.</p><h2 class="relative group">The LabStore Project<div id=the-labstore-project class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-labstore-project aria-label=Anchor>#</a></span></h2><p>Introducing LabStore, the fully open source, S3-compatible object store, built for engineers who value freedom and flexibility. Our goal is to give back to the community the freedom that others took awayâ€”multiple users, groups, and access keys, as well as the ability to set policies, manage versioning, object locking, etc.</p><p>Long term, we also aim to provide a service that runs on lower-end hardware, so that self-hosters can enjoy running LabStore on their limited memory NAS or Raspberry Pi, or so that devs don&rsquo;t waste local resources while building on top of an object store.</p><p>LabStore is for hobbyists and for prototyping, and it&rsquo;s also a learning experiment for us, its developers, but there&rsquo;s room to adapt and evolve, as the community sees fit, and opportunity arises. If it makes sense do do more, we&rsquo;ll do more.</p><p>It&rsquo;s still too early to tell what LabStore will become, as it&rsquo;s not even cooking in the oven yetâ€”the dough is still being prepared. Once it&rsquo;s fully baked, we will see! ðŸ˜Ž</p><p>For now, let&rsquo;s take a look at the first steps we&rsquo;ve taken to make this work.</p><h3 class="relative group">Project Management on GitHub<div id=project-management-on-github class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#project-management-on-github aria-label=Anchor>#</a></span></h3><p>Since it&rsquo;s not just me working on this project, I&rsquo;ve setup a GitHub Org as neutral territory, where I can collab with a friend who will be working on a web frontend for LabStore. The org is called <a href=https://github.com/IllumiKnowLabs target=_blank>IllumiKnow Labs</a>, where you can find the repo for <a href=https://github.com/IllumiKnowLabs/labstore target=_blank>LabStore</a>. It&rsquo;s perhaps too soon to open issues, but feel free to do soâ€”just keep in mind it won&rsquo;t be a priority at this time.</p><p>If you&rsquo;re curious, we&rsquo;re using GitHub Projects and a Kanban board to manage our issues and workflow. We keep separate release branches for backend and web frontend, with PRs to <code>main</code> requiring peer approval.</p><h3 class="relative group">Monorepo Structure<div id=monorepo-structure class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#monorepo-structure aria-label=Anchor>#</a></span></h3><p>We do all work in a monorepo that the whole project shares. We provide a <code>Makefile</code> for basic building tasks, and a <code>justfile</code> is being prepared to help with other tasks as well.</p><p>Here&rsquo;s an overview of the target project structure:</p><pre tabindex=0><code>labstore/
â”œâ”€â”€ backend/
â”œâ”€â”€ web/
â”œâ”€â”€ cli/
â”œâ”€â”€ shared/
â”œâ”€â”€ infra/
â”œâ”€â”€ docs/
â”œâ”€â”€ bin/
â”œâ”€â”€ Makefile
â”œâ”€â”€ justfile
â”œâ”€â”€ LICENSE
â”œâ”€â”€ CONTRIBUTING.md
â””â”€â”€ README.md
</code></pre><ul><li><code>backend/</code> â€“ Go project with the backend web services</li><li><code>web/</code> â€“ Svelte web frontend that will eventually integrate with the backend</li><li><code>cli/</code> â€“ entry-point command line tool to manage the whole application</li><li><code>shared/</code> â€“ common resources, like assets, specs, etc. (no packages here)</li><li><code>infra/</code> â€“ CI/CD or infrastructure configurations (we&rsquo;re currently using it to run an external S3 object store for web frontend testing)</li><li><code>docs/</code> â€“ markdown documentation (mostly used to support development)</li><li><code>bin/</code> â€“ user-facing binaries or scripts (currently just holds the backend binary, <code>labstore-server</code>)</li><li><code>Makefile</code> â€“ build and run backend and frontend</li><li><code>justfile</code> â€“ entry point to other project-specific <code>justfile</code> (e.g., <code>just backend</code> or <code>just infra</code>)</li><li><code>LICENSE</code> â€“ Apache License 2.0 (for community freedom and developer protection)</li><li><code>CONTRIBUTING.md</code> â€“ overall project contributing rules (working document)</li><li><code>README.md</code> â€“ empty so far (will contain instructions on how to deploy, run and use LabStore)</li></ul><h3 class="relative group">Manual Testing and Benchmarking<div id=manual-testing-and-benchmarking class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#manual-testing-and-benchmarking aria-label=Anchor>#</a></span></h3><p>So far, we haven&rsquo;t implemented any tests or benchmarks in Go, although I&rsquo;d love to do that, and it will be a requirement for opening the project to external contributions as well.</p><p>We&rsquo;re relying on manual testing so farâ€”it is what it is, time and resources are limited. We&rsquo;re using <a href=https://github.com/minio/warp target=_blank>warp</a>, by MinIO, to test performance, which also helped us debug SigV4, and we&rsquo;re using <a href=https://github.com/minio/mc target=_blank>mc</a>, <a href=https://rclone.org/s3/ target=_blank>rclone</a>, and <a href=https://github.com/peak/s5cmd target=_blank>s5cmd</a> to implement basic CLI testing commands using <code>just</code> (so far, we only test file copying).</p><h3 class="relative group">Final Remarks<div id=final-remarks class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#final-remarks aria-label=Anchor>#</a></span></h3><p>And this is it, the beginning of IllumiKnow Labs and LabStore. We hope this will be ground-zero for many learning projects and collaborations, and for some cool tools in the spirit of open source! Drop us a line on our <a href=https://github.com/IllumiKnowLabs/labstore/discussions target=_blank>discussion forum</a> for LabStore, if you have something to share, or use the regular <a href=https://datalabtechtv.com/ target=_blank>DataLabTechTV</a> social channels, and I&rsquo;ll make sure to convey any message to the team.</p></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Data Lab Tech" src=/img/avatar_hu14365428751860151861.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Data Lab Tech</div><div class="text-sm text-neutral-700 dark:text-neutral-400"><a href=https://youtube.com/@DataLabTechTV target=_blank>https://youtube.com/@DataLabTechTV</a></div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://youtube.com/@DataLabTechTV target=_blank aria-label=Youtube rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://bsky.app/profile/datalabtechtv.com target=_blank aria-label=Bluesky rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/DataLabTechTV target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://discord.gg/6xpe827ANZ target=_blank aria-label=Discord rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentcolor" d="M524.531 69.836a1.5 1.5.0 00-.764-.7A485.065 485.065.0 00404.081 32.03a1.816 1.816.0 00-1.923.91 337.461 337.461.0 00-14.9 30.6 447.848 447.848.0 00-134.426.0 309.541 309.541.0 00-15.135-30.6 1.89 1.89.0 00-1.924-.91A483.689 483.689.0 00116.085 69.137a1.712 1.712.0 00-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016.0 00.765 1.375A487.666 487.666.0 00176.02 479.918a1.9 1.9.0 002.063-.676A348.2 348.2.0 00208.12 430.4a1.86 1.86.0 00-1.019-2.588 321.173 321.173.0 01-45.868-21.853 1.885 1.885.0 01-.185-3.126c3.082-2.309 6.166-4.711 9.109-7.137a1.819 1.819.0 011.9-.256c96.229 43.917 200.41 43.917 295.5.0a1.812 1.812.0 011.924.233c2.944 2.426 6.027 4.851 9.132 7.16a1.884 1.884.0 01-.162 3.126 301.407 301.407.0 01-45.89 21.83 1.875 1.875.0 00-1 2.611 391.055 391.055.0 0030.014 48.815 1.864 1.864.0 002.063.7A486.048 486.048.0 00610.7 405.729a1.882 1.882.0 00.765-1.352C623.729 277.594 590.933 167.465 524.531 69.836zM222.491 337.58c-28.972.0-52.844-26.587-52.844-59.239S193.056 219.1 222.491 219.1c29.665.0 53.306 26.82 52.843 59.239.0 32.654-23.41 59.241-52.843 59.241zm195.38.0c-28.971.0-52.843-26.587-52.843-59.239S388.437 219.1 417.871 219.1c29.667.0 53.307 26.82 52.844 59.239.0 32.654-23.177 59.241-52.844 59.241z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:mail@datalabtechtv.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></span></a></div></div></div></div><div class=mb-10></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;title=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://bsky.app/intent/compose?text=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?+https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/" title="Post on Bluesky" aria-label="Post on Bluesky"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://s2f.kytta.dev/?text=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?%20https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/" title aria-label><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;resubmit=true&amp;title=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;quote=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;subject=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://api.whatsapp.com/send?text=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;resubmit=true&amp;title=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Share via WhatsApp" aria-label="Share via WhatsApp"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4.0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3.0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2.0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2.0-101.7 82.8-184.5 184.6-184.5 49.3.0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5.0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3.0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://t.me/share/url?url=https://datalabtechtv.com/posts/labstore-part-1-how-hard-can-it-be/&amp;resubmit=true&amp;title=LabStore%20-%20Part%201%20-%20Building%20an%20Object%20Store%20in%20Go:%20How%20Hard%20Can%20It%20Be?" title="Share via Telegram" aria-label="Share via Telegram"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section></div><script>var oid="views_posts/labstore-part-1-how-hard-can-it-be/index.md",oid_likes="likes_posts/labstore-part-1-how-hard-can-it-be/index.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/migrating-ducklake-catalog/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Migrating DuckLake Catalog From SQLite to PostgreSQL</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-10-28T12:00:00+01:00>28 October 2025</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/posts/labstore-part-2-sigv4-auth/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">LabStore - Part 2 - Building an Object Store in Go: Authenticating with SigV4</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-11-25T12:00:00+01:00>25 November 2025</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 mt-8 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/privacy/ title>Privacy</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/cookies/ title>Cookies</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a id=reset-cookie-options class="decoration-primary-500 flex items-center" href=# title="Reset Cookie Options"><span class=mr-1>ðŸª</span></a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Data Lab Tech</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script><script src=/js/search-keybind.min.b0547e1bcfb3922a05d78728999bbd36902e6c52a31b0b1efa373df47c6fa095.js integrity="sha256-sFR+G8+zkioF14comZu9NpAubFKjGwse+jc99HxvoJU=" crossorigin=anonymous></script><script src=/js/cookie-banner.min.010e183607b0d0550c6b0c6cdfee0ef6a8251e4995f06db7c9541c7a847f9751.js integrity="sha256-AQ4YNgew0FUMawxs3+4O9qglHkmV8G23yVQceoR/l1E=" crossorigin=anonymous></script><div id=cookie-spacer class="h-12 hidden"></div><div id=cookie-banner class="fixed inset-x-0 bottom-0 z-[90] hidden"><div class="opacity-90 backdrop-blur-2xl shadow-2xl px-4 py-4 text-sm text-white dark:text-neutral-100"><div class="max-w-[64rem] mx-auto flex flex-wrap items-center justify-between gap-4"><span>We use cookies to enhance your experience.
<a href=/privacy/ class="underline text-blue-300 hover:text-blue-100 ml-1">Learn more</a>.</span><div class="flex gap-4 shrink-0"><button id=cookie-decline class="font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer">
Decline
</button>
<button id=cookie-accept class="font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer">
Accept</button></div></div></div></div><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
        startOnLoad: true,
        theme: "base",
        themeCSS: `
          /* Left-align text in class diagrams */
          .nodeLabel {
            text-wrap: nowrap;
          }
        `,
        flowchart: {
            nodeSpacing: 20,
            rankSpacing: 100,
        },
        themeVariables: {
            fontFamily: 'var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace)',
            fontSize: "1.5em",

            background: "#1e1e1e",
            textColor: "#f8fafc",
            primaryColor: "#0ea5e9",
            tertiaryColor: "#f8fafc",
            primaryTextColor: "#1e1e1e",
            lineColor: "#94a3b8",
            noteBkgColor: "#2c3a4a",

             
            nodeBorder: "#38bdf8",
            clusterBkg: "#2c3a4a",
            clusterBorder: "#4b5563",

             
            actorTextColor: "#f8fafc",
            loopTextColor: "#f8fafc",

             
            tagLabelFontSize: ".6em",
            commitLabelFontSize: ".6em",
            commitLabelColor: "#f8fafc",
            commitLabelBackground: "#2c3a4a",
            git0: "#0ea5e9",
            git1: "#4b5563",
        }
    });
</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://datalabtechtv.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>