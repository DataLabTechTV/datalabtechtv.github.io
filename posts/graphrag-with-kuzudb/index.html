<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=X-UA-Compatible content="ie=edge"><title>GraphRAG with KùzuDB &#183; Data Lab Tech TV</title>
<meta name=title content="GraphRAG with KùzuDB &#183; Data Lab Tech TV"><meta name=description content="Let's delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with phi4 and gemma3."><meta name=keywords content="rag,graph-rag,kuzudb,neo4j,embeddings,langchain,ollama,phi4,gemma3,video,"><link rel=canonical href=https://datalabtechtv.com/posts/graphrag-with-kuzudb/><link type=text/css rel=stylesheet href=/css/main.bundle.min.36c3cd7950e4533fa7da3150d972e3edf34d07f83c0264ff04cad0969dfdb3b8a7065b0ed6c730c6d34a7bad516cfc6f6a5917ab1fdb10b25f481f8a17b54c16.css integrity="sha512-NsPNeVDkUz+n2jFQ2XLj7fNNB/g8AmT/BMrQlp39s7inBlsO1scwxtNKe61RbPxvalkXqx/bELJfSB+KF7VMFg=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script><script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.52b8d61b061c90a738102a0eac69eaa1479fdf5de882a0b0741d7515240617156a6c4477fcc91f9c962062804fe62d2932bb9f57d0aded208c762c2e1ed2e202.js integrity="sha512-UrjWGwYckKc4ECoOrGnqoUef313ogqCwdB11FSQGFxVqbER3/MkfnJYgYoBP5i0pMrufV9Ct7SCMdiwuHtLiAg==" data-copy=Copy data-copied=Copied></script><script src=/lib/zoom/zoom.min.f592a181a15d2a5b042daa7f746c3721acf9063f8b6acd175d989129865a37d400ae0e85b640f9ad42cd98d1f8ad30931718cf8811abdcc5fcb264400d1a2b0c.js integrity="sha512-9ZKhgaFdKlsELap/dGw3Iaz5Bj+Las0XXZiRKYZaN9QArg6FtkD5rULNmNH4rTCTFxjPiBGr3MX8smRADRorDA=="></script><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:url" content="https://datalabtechtv.com/posts/graphrag-with-kuzudb/"><meta property="og:site_name" content="Data Lab Tech TV"><meta property="og:title" content="GraphRAG with KùzuDB"><meta property="og:description" content="Let's delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with phi4 and gemma3."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-07-15T12:00:00+01:00"><meta property="article:modified_time" content="2025-07-15T12:00:00+01:00"><meta property="article:tag" content="Rag"><meta property="article:tag" content="Graph-Rag"><meta property="article:tag" content="Kuzudb"><meta property="article:tag" content="Neo4j"><meta property="article:tag" content="Embeddings"><meta property="article:tag" content="Langchain"><meta property="og:image" content="https://datalabtechtv.com/posts/graphrag-with-kuzudb/feature.jpeg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://datalabtechtv.com/posts/graphrag-with-kuzudb/feature.jpeg"><meta name=twitter:title content="GraphRAG with KùzuDB"><meta name=twitter:description content="Let's delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with phi4 and gemma3."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"","name":"GraphRAG with KùzuDB","headline":"GraphRAG with KùzuDB","description":"Let\u0027s delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with phi4 and gemma3.","abstract":"Summary # In this video, I\u0026rsquo;ll delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with phi4 and gemma3.","inLanguage":"en","url":"https:\/\/datalabtechtv.com\/posts\/graphrag-with-kuzudb\/","author":{"@type":"Person","name":"Data Lab Tech"},"copyrightYear":"2025","dateCreated":"2025-07-15T12:00:00\u002b01:00","datePublished":"2025-07-15T12:00:00\u002b01:00","dateModified":"2025-07-15T12:00:00\u002b01:00","keywords":["rag","graph-rag","kuzudb","neo4j","embeddings","langchain","ollama","phi4","gemma3","video"],"mainEntityOfPage":"true","wordCount":"5807"}]</script><meta name=author content="Data Lab Tech"><link href=https://youtube.com/@DataLabTechTV rel=me><link href=https://bsky.app/profile/datalabtechtv.com rel=me><link href=https://github.com/DataLabTechTV rel=me><link href=https://discord.gg/6xpe827ANZ rel=me><script src=/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj+KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script><script async src="https://www.googletagmanager.com/gtag/js?id=G-VQTLJTJJ7T"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("consent","default",{analytics_storage:"denied",ad_storage:"denied"}),gtag("js",new Date),gtag("config","G-VQTLJTJJ7T",{anonymize_ip:!0,allow_google_signals:!1})</script><script>MathJax={tex:{inlineMath:[["$","$"]]},svg:{fontCache:"global"}}</script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js></script><style>.medium-zoom-overlay{background:rgba(0,0,0,.9)!important;z-index:100}.of-wide{width:150%;margin-left:-25%;height:auto}.of-narrow{width:125%;height:auto}</style><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 min-h-[130px] opacity-65 pl-[24px] pr-[24px] bg-gradient-to-b from-neutral from-60% dark:from-neutral-800 to-transparent mix-blend-normal" style=z-index:80></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3"><div><a href=/ class=flex><span class=sr-only>Data Lab Tech TV</span>
<img src=/img/logo.png width=450 height=450 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Data Lab Tech TV"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Data Lab Tech TV</a></nav><nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12"><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Blog</p></a><a href=https://youtube.com/@DataLabTechTV target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></span><p class="text-base font-medium" title>YouTube</p></a><a href=https://bsky.app/profile/datalabtechtv.com target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><span class=mr-1><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg></span></span><p class="text-base font-medium" title>Bluesky</p></a><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-base font-medium" title>Tags</p></a><div><div class="cursor-pointer flex items-center nested-menu"><a class="text-base font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400" title>Categories
</a><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></div><div class="absolute menuhide"><div class="pt-2 p-5 mt-2 rounded-xl backdrop-blur shadow-2xl"><div class="flex flex-col space-y-3"><a href=/categories/data-science/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Data Science</p></a><a href=/categories/data-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Data Engineering</p></a><a href=/categories/mlops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>MLOps</p></a><a href=/categories/devops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>DevOps</p></a><a href=/categories/software-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Software Engineering</p></a><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-sm" style=white-space:nowrap title>Philosophy of Technology</p></a></div></div></div></div><button id=search-button aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></nav><div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12"><span></span>
<button id=search-button-mobile aria-label=Search class="text-base hover:text-primary-600 dark:hover:text-primary-400" title>
<span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></button></div></div><div class="-my-2 md:hidden"><label id=menu-button class=block><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li id=menu-close-button><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/posts/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Blog</p></a></li><li class=mt-1><a href=https://youtube.com/@DataLabTechTV target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg></span></div><p class="text-bg font-bg" title>YouTube</p></a></li><li class=mt-1><a href=https://bsky.app/profile/datalabtechtv.com target=_blank class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><div class=mr-2><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg></span></div><p class="text-bg font-bg" title>Bluesky</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Tags</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-bg font-bg" title>Categories</p><span><span class="relative block icon"><svg viewBox="0 0 20 20" fill="currentcolor" aria-hidden="true"><path fill-rule="evenodd" d="M5.23 7.21a.75.75.0 011.06.02L10 11.168l3.71-3.938a.75.75.0 111.08 1.04l-4.25 4.5a.75.75.0 01-1.08.0l-4.25-4.5a.75.75.0 01.02-1.06z" clip-rule="evenodd"/></svg></span></span></a></li><li class=mt-1><a href=/categories/data-science/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Data Science</p></a></li><li class=mt-1><a href=/categories/data-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Data Engineering</p></a></li><li class=mt-1><a href=/categories/mlops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>MLOps</p></a></li><li class=mt-1><a href=/categories/devops/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>DevOps</p></a></li><li class=mt-1><a href=/categories/software-engineering/ class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Software Engineering</p></a></li><li class=mt-1><a href class="flex items-center text-gray-500 hover:text-primary-600 dark:hover:text-primary-400"><p class="text-sm font-small" title>Philosophy of Technology</p></a></li><li class=mb-2></li></ul></div></label></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/background_hu5250322968290309648.png)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-30 dark:opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral dark:to-neutral-800 mix-blend-normal"></div></div><div id=background-blur class="fixed opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl"></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("background-blur");n.style.opacity=t/300})</script><header id=single_header class="mt-5 max-w-prose"><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">GraphRAG with KùzuDB</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime=2025-07-15T12:00:00+01:00>15 July 2025</time><span class="px-2 text-primary-500">&#183;</span><span>5807 words</span><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">28 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/categories/data-science/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Data Science
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/rag/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Rag
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/graph-rag/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Graph-Rag
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/kuzudb/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Kuzudb
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/neo4j/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Neo4j
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/embeddings/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Embeddings
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/langchain/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Langchain
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/ollama/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Ollama
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/phi4/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Phi4
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/gemma3/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Gemma3
</span></span></span><span style=margin-top:.5rem class=mr-2 onclick='return window.open("/tags/video/","_self"),!1'><span class=flex style=cursor:pointer><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">Video</span></span></span></div></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first lg:ml-auto px-0 lg:order-last ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-[140px]"><details open id=TOCView class="toc-right mt-0 overflow-y-scroll overscroll-contain scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600 rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#what-is-graphrag>What is GraphRAG?</a></li><li><a href=#our-approach>Our Approach</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#step-1-user-query>Step 1: User Query</a></li><li><a href=#step-2-graph-retriever>Step 2: Graph Retriever</a></li><li><a href=#step-3-context-assembler>Step 3: Context Assembler</a></li><li><a href=#step-4-final-answer>Step 4: Final Answer</a></li></ul></li><li><a href=#integrating-data-as-a-graph>Integrating Data as a Graph</a><ul><li><a href=#direct-mapping>Direct Mapping</a></li><li><a href=#integrated-mapping>Integrated Mapping</a></li></ul></li><li><a href=#graph-storage-with-kùzudb>Graph Storage with KùzuDB</a><ul><li><a href=#pointers-vs-partitions>Pointers vs Partitions</a><ul><li><a href=#neo4j-pointers>Neo4j: Pointers</a></li><li><a href=#kùzudb-partitions>KùzuDB: Partitions</a></li></ul></li></ul></li><li><a href=#graph-loading>Graph Loading</a><ul><li><a href=#create-schema>Create Schema</a></li><li><a href=#import-nodes-and-edges>Import Nodes and Edges</a></li><li><a href=#graph-statistics>Graph Statistics</a></li></ul></li><li><a href=#computing-node-embeddings>Computing Node Embeddings</a></li><li><a href=#graphrag-chain>GraphRAG Chain</a><ul><li><a href=#graph-retriever>Graph Retriever</a><ul><li><a href=#entities_prompt>entities_prompt</a></li><li><a href=#langchain-kuzu>langchain-kuzu</a></li><li><a href=#code-llm-and-kg-query>Code LLM and KG Query</a></li></ul></li><li><a href=#context-assembler>Context Assembler</a><ul><li><a href=#approximate-nearest-neighbors>Approximate Nearest Neighbors</a></li><li><a href=#computing-relevant-paths>Computing Relevant Paths</a></li></ul></li><li><a href=#answer-generation>Answer Generation</a></li><li><a href=#final-remarks>Final Remarks</a></li></ul></li><li><a href=#kùzudb-consumer-notes>KùzuDB Consumer Notes</a><ul><li><a href=#data-types-and-functions>Data Types and Functions</a></li><li><a href=#wishlist>Wishlist</a></li><li><a href=#snags>Snags</a></li><li><a href=#bugs>Bugs</a></li></ul></li></ul></nav></div></details><details class="toc-inside mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#summary>Summary</a></li><li><a href=#what-is-graphrag>What is GraphRAG?</a></li><li><a href=#our-approach>Our Approach</a></li><li><a href=#architecture>Architecture</a><ul><li><a href=#step-1-user-query>Step 1: User Query</a></li><li><a href=#step-2-graph-retriever>Step 2: Graph Retriever</a></li><li><a href=#step-3-context-assembler>Step 3: Context Assembler</a></li><li><a href=#step-4-final-answer>Step 4: Final Answer</a></li></ul></li><li><a href=#integrating-data-as-a-graph>Integrating Data as a Graph</a><ul><li><a href=#direct-mapping>Direct Mapping</a></li><li><a href=#integrated-mapping>Integrated Mapping</a></li></ul></li><li><a href=#graph-storage-with-kùzudb>Graph Storage with KùzuDB</a><ul><li><a href=#pointers-vs-partitions>Pointers vs Partitions</a><ul><li><a href=#neo4j-pointers>Neo4j: Pointers</a></li><li><a href=#kùzudb-partitions>KùzuDB: Partitions</a></li></ul></li></ul></li><li><a href=#graph-loading>Graph Loading</a><ul><li><a href=#create-schema>Create Schema</a></li><li><a href=#import-nodes-and-edges>Import Nodes and Edges</a></li><li><a href=#graph-statistics>Graph Statistics</a></li></ul></li><li><a href=#computing-node-embeddings>Computing Node Embeddings</a></li><li><a href=#graphrag-chain>GraphRAG Chain</a><ul><li><a href=#graph-retriever>Graph Retriever</a><ul><li><a href=#entities_prompt>entities_prompt</a></li><li><a href=#langchain-kuzu>langchain-kuzu</a></li><li><a href=#code-llm-and-kg-query>Code LLM and KG Query</a></li></ul></li><li><a href=#context-assembler>Context Assembler</a><ul><li><a href=#approximate-nearest-neighbors>Approximate Nearest Neighbors</a></li><li><a href=#computing-relevant-paths>Computing Relevant Paths</a></li></ul></li><li><a href=#answer-generation>Answer Generation</a></li><li><a href=#final-remarks>Final Remarks</a></li></ul></li><li><a href=#kùzudb-consumer-notes>KùzuDB Consumer Notes</a><ul><li><a href=#data-types-and-functions>Data Types and Functions</a></li><li><a href=#wishlist>Wishlist</a></li><li><a href=#snags>Snags</a></li><li><a href=#bugs>Bugs</a></li></ul></li></ul></nav></div></details><script>var margin=200,marginError=50;(function(){var t=$(window),e=$("#TOCView"),s=e.height();function n(){var n=t.height()-margin;s>=n?(e.css("overflow-y","scroll"),e.css("max-height",n+marginError+"px")):(e.css("overflow-y","hidden"),e.css("max-height","9999999px"))}t.on("resize",n),$(document).ready(n)})()</script></div></div><div class="min-w-0 min-h-0 max-w-fit"><div class="article-content max-w-prose mb-20"><h2 class="relative group">Summary<div id=summary class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#summary aria-label=Anchor>#</a></span></h2><p>In this video, I&rsquo;ll delve into GraphRAG, learning about KùzuDB, node embeddings vs text embeddings, and LangChain, running on top of Ollama with <code>phi4</code> and <code>gemma3</code>.</p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden;max-width:100%><iframe src="https://www.youtube.com/embed/m61u3mqu1qY?si=lQo6HNjEbhCN4-hK" frameborder=0 allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy=strict-origin-when-cross-origin allowfullscreen style=position:absolute;top:0;left:0;width:100%;height:100%>></iframe></div><h2 class="relative group">What is GraphRAG?<div id=what-is-graphrag class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-is-graphrag aria-label=Anchor>#</a></span></h2><p>RAG stands for Retrieval Augmented Generation, which means that, instead of simply providing an answer to the user via prompt engineering (i.e., just using an LLM), we also factor in a knowledge base into the process, to provide context and enrich the generated answer. This knowledge base is usually an index that we can search (hence RAG), but it can also be a graph. If we&rsquo;re retrieving from a graph, to produce a context for an LLM, we&rsquo;re doing GraphRAG. That&rsquo;s it.</p><p>Generally, a GraphRAG task consists of taking a user query, mapping it into a knowledge graph—usually through text embedding—and querying that knowledge graph to build a context around relevant nodes and relationships. That context is then combined with the user query and fed to an LLM to produce a final and improved answer.</p><p>There also seems to be trend going around that&rsquo;s highlighting &ldquo;context engineering&rdquo; as the hot new skill in in AI—see <a href=https://blog.langchain.com/the-rise-of-context-engineering/ target=_blank>The rise of &ldquo;context engineering&rdquo;</a> on LangChain&rsquo;s blog, and <a href=https://www.philschmid.de/context-engineering target=_blank>The New Skill in AI is Not Prompting, It&rsquo;s Context Engineering</a> on Philipp Schmid&rsquo;s blog, who is a Senior AI Relation Engineer at Google DeepMind.</p><p>If you want to stay on trend and learn something cool, then read bellow on how to use graphs to fetch context, and become better at &ldquo;context engineering&rdquo; right now!</p><h2 class="relative group">Our Approach<div id=our-approach class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#our-approach aria-label=Anchor>#</a></span></h2><p>We approach GraphRAG in an unconventional way. Instead of relying on text embeddings, we add an extra step to the process, so that we can alternatively use node embeddings. I&rsquo;ll explain the reason for this decision in the following paragraphs.</p><p>When using text to describe nodes (text embeddings) rather than the neighboring graph structure (node embeddings), the user query, which is also text, can be embedded into the same vector space. This means that ANN (approximate nearest neighbors) is directly used to map the user query into a context subgraph—this is not only efficient, but also open ended—ANN based on text embeddings is able to reach semantically similar text, and therefore its associated nodes, rather than just doing exact matches.</p><p>On the other hand, when using node embeddings, we&rsquo;ll need an extra step to map named entities in the user query to nodes in the knowledge graph. Only then can we compute ANN for those nodes, working as an expansion stage that builds the context. This provides a higher specificity, since we try to exactly match the entities that the user mentions, but, more importantly, it&rsquo;s actually based on the graph and its structure rather than text.</p><p>When working with graphs, always ask yourself whether you could have implemented the same workflow without using a graph structure at all. If the answer is yes, then you&rsquo;re not really taking advantage of your graph. To me, that&rsquo;s just RAG, not GraphRAG. On the other hand, if you find yourself expanding to neighbors, computing shortest paths, clustering nodes, or ranking and selecting nodes based on centrality metrics, then you&rsquo;re definitely doing GraphRAG—and a bit of network science as well.</p><h2 class="relative group">Architecture<div id=architecture class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#architecture aria-label=Anchor>#</a></span></h2><p>We&rsquo;ll be working with music data that includes friendship relations between users in a music platform, as well as user listening profiles pointing to preferred genres and genre-tagged tracks. As such, we are assuming that the system will take a music-related prompt as input. The high level workflow of a GraphRAG system is illustrated below, and then we detail each step for our specific use case.</p><p><figure><img class="my-0 rounded-md" loading=lazy src=./graphrag-architecture.png alt="GraphRAG Architecture"></figure></p><h3 class="relative group">Step 1: User Query<div id=step-1-user-query class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-1-user-query aria-label=Anchor>#</a></span></h3><ol><li>The user asks for music recommendations, either mentioning artists, tracks, or genres that they like.</li></ol><h3 class="relative group">Step 2: Graph Retriever<div id=step-2-graph-retriever class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-2-graph-retriever aria-label=Anchor>#</a></span></h3><ol><li>The user query is passed into the Graph Retriever module, which uses an LLM to build a cypher query that matches named entities to nodes in the graph. This will describe the user taste, working as a mini user profile.</li></ol><h3 class="relative group">Step 3: Context Assembler<div id=step-3-context-assembler class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-3-context-assembler aria-label=Anchor>#</a></span></h3><ol><li>Each node will have precomputed node embeddings—we&rsquo;ll describe this process later on—which we use to find the approximate nearest neighbors, and extend the mini user profile.</li><li>For each identified node, we compute a sample of relevant paths to depict context—shortest paths between user profile nodes and neighbor nodes, and random walks from neighbor nodes.</li><li>Each path is described using its nodes and properties, along with pairwise relationships and their properties, in a format that naturally fits a natural language prompt—it&rsquo;s not valid cypher code, nor it&rsquo;s properly structured text, but rather a semi-structured, human-readable format.</li></ol><h3 class="relative group">Step 4: Final Answer<div id=step-4-final-answer class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#step-4-final-answer aria-label=Anchor>#</a></span></h3><ol><li>The context is composed into the original user prompt and a final prompt is produced.</li><li>The user is presented with the final response generated using the contextualized prompt—this answer should leverage LLM knowledge and the contextual neighborhood of the user&rsquo;s taste according to the knowledge graph, to hopefully provide better or more informed recommendations.</li></ol><h2 class="relative group">Integrating Data as a Graph<div id=integrating-data-as-a-graph class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#integrating-data-as-a-graph aria-label=Anchor>#</a></span></h2><p>We use two Kaggle datasets to build our knowledge graph: <a href=https://www.kaggle.com/datasets/andreagarritano/deezer-social-networks target=_blank>Deezer Social Networks</a> and <a href=https://www.kaggle.com/datasets/undefinenull/million-song-dataset-spotify-lastfm target=_blank>Million Song Dataset + Spotify + Last.fm</a> (MSDSL). If you want to know more about the ETL process, you can read the blog post on <a href=https://datalabtechtv.com/posts/data-lakehouse-dbt-ducklake/ target=_blank>Data Lakehouse with dbt and DuckLake</a>, and watch the <a href="https://youtu.be/zn69Q7FiFfo?si=ZFjfSl5vo8gcGACR" target=_blank>video</a> about it.</p><p>In this blog post, we assume that the required node and relationship data is already available as Apache Parquet files that are ready to load into KùzuDB. So, we&rsquo;ll focus on discussing possible integration strategies—direct mapping or integrated mapping—along with their pros and cons.</p><h3 class="relative group">Direct Mapping<div id=direct-mapping class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#direct-mapping aria-label=Anchor>#</a></span></h3><p>From an ontological or information preservation perspective, directly mapping the entities in our two datasets to their own nodes would make sense. However, purely from a recommender system&rsquo;s perspective, there isn&rsquo;t a clear advantage to doing this, as long as we can identify where a user is from (e.g., via a node property or a connector node).</p><img src=./kg-direct-mapping.png alt="KG Direct Mapping" width=75%><p>Keeping separate node labels with similar semantics—Deezer User and MSDSL User, or Genre and Tag—would be unhelpful for the recommendation task, as it would increase complexity while offering no real advantage in exchange.</p><h3 class="relative group">Integrated Mapping<div id=integrated-mapping class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#integrated-mapping aria-label=Anchor>#</a></span></h3><p>Even if Deezer users will never overlap with MSDSL users, we still benefit from combining users as a single entity—and we can keep that additional information as a <code>source</code> property. While the <code>Friend</code> and <code>Likes</code> relationships exist only for Deezer users, and the <code>ListenedTo</code> and <code>Tagged</code> relationships exist only for MSDSL, we&rsquo;re still able to recommend tracks from MSDSL based on liked genres from Deezer users, or recommend new genres to MSDSL users based on the tags of listened tracks and liked genres by Deezer users.</p><img src=./kg-integrated-mapping.png alt="KG Integrated Mapping" width=75%><p>This modeling approach is also more than enough to exemplify how GraphRAG can be useful in this task, showing off how different datasets can live in a common space, and how connections are established. The more data you have, the richer your knowledge graph will be, and the more detail you can provide to your users.</p><h2 class="relative group">Graph Storage with KùzuDB<div id=graph-storage-with-k%C3%B9zudb class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#graph-storage-with-k%C3%B9zudb aria-label=Anchor>#</a></span></h2><p>For storage, we picked <a href=https://kuzudb.com/ target=_blank>KùzuDB</a>, an embedded graph database solution that, in my opinion, promises to shake the market for the first time since Neo4j and OrientDB were fighting for their place in the community. To me, KùzuDB feels like the DuckDB of graph databases—it&rsquo;s for analytics, it has a similar extensions system and functions API, and it even lets you <a href=https://docs.kuzudb.com/extensions/attach/duckdb/ target=_blank>attach DuckDB</a>, so they play well together.</p><p>I spent a few days bugging the team with a few questions on Discord, after having exchanged a couple of e-mails with them a few months ago, where I tried to understand whether it was worth checking it out or not. So many graph databases have come and gone, but this is not one of them. I have only good things to say about the product and the team—KùzuDB feels technically sound and robust, and the team is approachable, willing to help, and pragmatic. If you&rsquo;re reading this, thanks guys!</p><h3 class="relative group">Pointers vs Partitions<div id=pointers-vs-partitions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#pointers-vs-partitions aria-label=Anchor>#</a></span></h3><p>Let&rsquo;s delve a little into the storage scheme for KùzuDB, putting it in context by looking at its counterpart from Neo4j. While I&rsquo;m partial to Neo4j&rsquo;s approach, and always look for index-free adjacency in graph databases, KùzuDB&rsquo;s columnar approach looks rock solid and ideal for batch operations, as expected from an analytical store.</p><h4 class="relative group">Neo4j: Pointers<div id=neo4j-pointers class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#neo4j-pointers aria-label=Anchor>#</a></span></h4><p>OLTP graph databases like Neo4j implement index-free adjacency using a pointer-based storage layout that supports chained traversals. When reading a node, we get a pointer to one of its incident relationships. That relationship then provides two other relationship pointers, one to the next relationship from the source node, and another one to the next relationship from the target node. This produces a linked list of incident relationships, making it possible to iterate over all rels for a given node, as well as traverse the graph by following the rels for source/target nodes that match or do not match the origin node, respectively.</p><p>To illustrate this, let&rsquo;s assume that, starting from <code>n1</code>, we reach <code>(n1)-[r1]-(n2)</code>, and from there we can choose to either jump to another rel incident in <code>n1</code> (origin node) or another rel incident in <code>n2</code> (neighbor node). When iterating over all incident rels on <code>n1</code>, then we might jump to <code>(n1)-[r2]-(n3)</code>, but if we&rsquo;re traversing we&rsquo;ll likely jump to another rel, such as <code>(n2)-[r3]-(n4)</code>, which forms the path <code>(n1)-[r1]-(n2)-[r3]-(n4)</code>. Each step in a traversal essentially costs one disk seek operation, including node-to-edge as a step, and not accounting for caching.</p><h4 class="relative group">KùzuDB: Partitions<div id=k%C3%B9zudb-partitions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#k%C3%B9zudb-partitions aria-label=Anchor>#</a></span></h4><p>KùzuDB approaches storage as an OLAP database, using <a href=https://github.com/kuzudb/kuzu/issues/1474 target=_blank>Node-group based Storage (Issue #1474)</a>, which was inspired by the concept of row groups from columnar formats like Apache ORC or Apache Parquet.</p><p>Each node group represents a partition with a given number of nodes or edges with multiple column chunks. A basic column chunk stores a bitmap of null values as well as the values themselves—for string and list columns, offsets are also stored, with each value representing the length of the string or list for each value.</p><p>A node group can also represent a column chunk of relationships (rel-lists). Each rel-lists column chunk contains a non-null column of neighbor IDs, and a header with offsets representing the number of neighbors of each node at the corresponding offset in the equivalent node group of nodes. The rel-lists column chunk can also store relationship properties in the same way as node properties are stored. Bit/byte packing and string dictionary compression techniques are also used at the column level to accelerate querying. And a metadata file is kept in memory to help find column chunks based on the node group ID and column name (that can be a rel-lists).</p><p>While not index-free in the sense of pointer-chained traversals, KùzuDB still provides an extremely efficient low-level traversal logic, with the added advantage of columnar storage, which is ideal for analytical tasks—it really is the DuckDB of graph databases.</p><p>To illustrate the process, let&rsquo;s say that we start from <code>n1</code>. We lookup the corresponding node group for <code>n1</code> using the metadata file (always available in memory) and, knowing the node group ID, we repeat the process for the rels-list column chunk in the equivalent node group. Through offset arithmetic we can easily obtain the node IDs for neighboring nodes, and repeat the process to keep traversing. Traversing a path like <code>(n1)-[r1]-(n2)-[r3]-(n4)</code> should require at most one disk read per node group, similar in principle to Neo4j&rsquo;s per-hop seeks, though amortized over a batch of nodes and properties. While in Neo4j we traverse one pointer at a time, but filter in-memory, in KùzuDB we traverse by loading node groups, being able to filter out entire rows in a single batch, and skipping decompression for irrelevant rows, or irrelevant neighbor lists in rel-lists.</p><p>I might have missed a few details, or gotten a few of them wrong, but this is not meant as an in-depth comparison of the storage and querying approaches of Neo4j and KùzuDB. It&rsquo;s rather a testament to the effort that the KùzuDB team has put into designing a robust storage schema that is technically sound and efficient.</p><p>To put this into context, the graph operations we run in this study are for a graph with over 1.15M nodes and 11.62M relationships (see <a href=#graph-statistics>Graph Statistics</a>), which KùzuDB easily supports on a single node with moderately-good specs (24 CPU cores, 24 GiB RAM allocated to WSL2).</p><h2 class="relative group">Graph Loading<div id=graph-loading class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#graph-loading aria-label=Anchor>#</a></span></h2><p>If you watched <a href="https://youtu.be/zn69Q7FiFfo?si=bH8dyPwH56hnKzI9" target=_blank>Data Lakehouse with dbt and DuckLake</a>, then you already knew that we had gone with the integrated mapping approach, and we have our node and relationship parquet files ready to load into a graph database.</p><p>Below we will describe the steps taken to load the nodes and edges into KùzuDB. We implemented this in Python, under the <a href=https://github.com/DataLabTechTV/datalab/blob/v0.3.0/graph/ops.py target=_blank>KuzuOps</a> class, which run the cypher queries that we describe below.</p><h3 class="relative group">Create Schema<div id=create-schema class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#create-schema aria-label=Anchor>#</a></span></h3><p>In KùzuDB, we are required to create tables for all of our nodes and relationships. This is what our schema looks like for the Deezer and MSDSL music data. Let&rsquo;s begin with nodes.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=n>NODE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=k>User</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>node_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>user_id</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>source</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>country</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>node_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=n>NODE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Genre</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>node_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>genre</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>node_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=n>NODE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Track</span><span class=w> </span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>node_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>track_id</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>name</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>artist</span><span class=w> </span><span class=n>STRING</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>year</span><span class=w> </span><span class=n>INT16</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>PRIMARY</span><span class=w> </span><span class=k>KEY</span><span class=w> </span><span class=p>(</span><span class=n>node_id</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>As you can see, we defined an <code>INT64</code> <code>node_id</code> property that is unique across all nodes, regardless of their label (i.e., there is no <code>node_id</code> collision for <code>User</code>, <code>Genre</code> and <code>Track</code>). This is set as the primary key for our nodes, which means an index is also created for <code>node_id</code>.</p><p>Then, we create our relationship tables.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>CREATE</span><span class=w> </span><span class=n>REL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Friend</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>FROM</span><span class=w> </span><span class=k>User</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=k>User</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>MANY_MANY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=n>REL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Likes</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>FROM</span><span class=w> </span><span class=k>User</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Genre</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>MANY_MANY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=n>REL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>ListenedTo</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>FROM</span><span class=w> </span><span class=k>User</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Track</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>play_count</span><span class=w> </span><span class=n>INT32</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>MANY_MANY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>CREATE</span><span class=w> </span><span class=n>REL</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>Tagged</span><span class=p>(</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=k>FROM</span><span class=w> </span><span class=n>Track</span><span class=w> </span><span class=k>TO</span><span class=w> </span><span class=n>Genre</span><span class=p>,</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>	</span><span class=n>MANY_MANY</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=p>);</span><span class=w>
</span></span></span></code></pre></div><p>All of our relationships are <code>MANY_TO_MANY</code>, with <code>ListenedTo</code> also storing a <code>play_count</code> property.</p><p>This produces a graph schema with three node labels and four rel labels, as illustrated in <a href=#integrated-mapping>Integrated Mapping</a>.</p><h3 class="relative group">Import Nodes and Edges<div id=import-nodes-and-edges class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#import-nodes-and-edges aria-label=Anchor>#</a></span></h3><p>Our node and edge parquet files are stored in S3 and, while KùzuDB can directly read from S3, it does not support disabling SSL, so we were unable to use an S3-based workflow. In production, it&rsquo;s common for SSL to be enabled, but in a lab or prototyping environment it&rsquo;s not. As such, we simply downloaded each parquet file using <code>boto3</code> and then ran the following <code>COPY</code> commands (we replace filenames with readable names, but we actually used temporary files).</p><p>We load nodes as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>COPY</span><span class=w> </span><span class=k>User</span><span class=p>(</span><span class=n>node_id</span><span class=p>,</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=n>country</span><span class=p>,</span><span class=w> </span><span class=k>source</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;nodes/dsn_nodes_users.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=k>User</span><span class=p>(</span><span class=n>node_id</span><span class=p>,</span><span class=w> </span><span class=n>user_id</span><span class=p>,</span><span class=w> </span><span class=k>source</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;nodes/msdsl_nodes_users.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=n>Track</span><span class=p>(</span><span class=n>node_id</span><span class=p>,</span><span class=w> </span><span class=n>track_id</span><span class=p>,</span><span class=w> </span><span class=n>name</span><span class=p>,</span><span class=w> </span><span class=n>artist</span><span class=p>,</span><span class=w> </span><span class=k>year</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;nodes/msdsl_nodes_tracks.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=n>Genre</span><span class=p>(</span><span class=n>node_id</span><span class=p>,</span><span class=w> </span><span class=n>genre</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;nodes/nodes_genres.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><p>We load relationships as follows:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>COPY</span><span class=w> </span><span class=n>Friend</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;edges/dsn_edges_friendships.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=n>Likes</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;edges/dsn_edges_user_genres.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=n>ListenedTo</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;edges/msdsl_edges_user_tracks.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>COPY</span><span class=w> </span><span class=n>Tagged</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=s1>&#39;edges/msdsl_edges_track_tags.parquet&#39;</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><h3 class="relative group">Graph Statistics<div id=graph-statistics class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#graph-statistics aria-label=Anchor>#</a></span></h3><p>After loading our graph, we computed a few basic statistics using the following query:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=s2>&#34;No. &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>label</span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&#34; Nodes&#34;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>stat</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=s2>&#34;Total No. Nodes&#34;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>stat</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MATCH</span><span class=w> </span><span class=p>()</span><span class=o>-</span><span class=p>[</span><span class=n>r</span><span class=p>]</span><span class=o>-&gt;</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=s2>&#34;No. &#34;</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=n>label</span><span class=p>(</span><span class=n>r</span><span class=p>)</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=s2>&#34; Rels&#34;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>stat</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MATCH</span><span class=w> </span><span class=p>()</span><span class=o>-</span><span class=p>[]</span><span class=o>-&gt;</span><span class=p>()</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=s2>&#34;Total No. Rels&#34;</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>stat</span><span class=p>,</span><span class=w> </span><span class=k>count</span><span class=p>(</span><span class=o>*</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>val</span><span class=p>;</span><span class=w>
</span></span></span></code></pre></div><table><thead><tr><th>Statistic</th><th style=text-align:right>Value</th></tr></thead><tbody><tr><td>No. User Nodes</td><td style=text-align:right>1,105,921</td></tr><tr><td>No. Genre Nodes</td><td style=text-align:right>171</td></tr><tr><td>No. Track Nodes</td><td style=text-align:right>50,683</td></tr><tr><td><strong>Total No. Nodes</strong></td><td style=text-align:right><strong>1,156,775</strong></td></tr><tr><td>No. Friend Rels</td><td style=text-align:right>846,915</td></tr><tr><td>No. Likes Rels</td><td style=text-align:right>880,698</td></tr><tr><td>No. ListenedTo Rels</td><td style=text-align:right>9,711,301</td></tr><tr><td>No. Tagged Rels</td><td style=text-align:right>185,313</td></tr><tr><td><strong>Total No. Rels</strong></td><td style=text-align:right><strong>11,624,227</strong></td></tr></tbody></table><h2 class="relative group">Computing Node Embeddings<div id=computing-node-embeddings class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#computing-node-embeddings aria-label=Anchor>#</a></span></h2><p>KùzuDB has a <code>vector</code> extension that supports HNSW indexing for vectors, similar to <a href=https://www.pinecone.io/learn/series/faiss/hnsw/ target=_blank>Pinecone</a>, <a href=https://weaviate.io/developers/weaviate/concepts/vector-index target=_blank>Weaviate</a>, or <a href="https://github.com/pgvector/pgvector?tab=readme-ov-file#hnsw" target=_blank>pgvector</a>. It supports semantic search via ANN, which we&rsquo;ll use on the <a href=#graph-retriever>Graph Retriever</a> component to establish a context based on graph paths.</p><p>We precompute node embeddings based on a PyTorch implementation—see the <a href=https://github.com/DataLabTechTV/datalab/blob/v0.3.0/graph/embedding.py target=_blank>graph.embedding</a> module in the <a href=https://github.com/DataLabTechTV/datalab target=_blank>datalab</a> repo. We use a simplified version of the Fast Random Projection (FastRP) algorithm, where the $L$ component corresponds directly to the node degrees, the $R$ component samples from a normal distribution, and a Multi-Layer Perceptron (MLP) is applied on top of the fixed FastRP embeddings to introduce non-linear activations, enabling the model to learn complex, non-linear mappings for downstream tasks.</p><p>This implementation can be run for a graph (e.g., <code>music_taste</code>) by calling the following command:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dlctl graph compute embeddings <span class=s2>&#34;music_taste&#34;</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -d <span class=m>256</span> -b <span class=m>9216</span> -e <span class=m>5</span>
</span></span></code></pre></div><p>This will iterate over batches of <code>9216</code> nodes and compute embeddings of dimension <code>256</code> over <code>5</code> epochs, which are stored in the <code>embedding</code> property of each node. Batching is handled by the <a href=https://github.com/DataLabTechTV/datalab/blob/main/graph/batch.py target=_blank>KuzuNodeBatcher</a> class that we implement, which relies on the <a href=https://github.com/DataLabTechTV/datalab/blob/main/graph/ops.py#L197 target=_blank>query_nodes_batch</a> and <a href=https://github.com/DataLabTechTV/datalab/blob/main/graph/ops.py#L218 target=_blank>query_neighbors</a> methods from the <code>KuzuOps</code> class.</p><p>The first method implement the following cypher query for paginating nodes:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=n>n</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>node_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>n</span><span class=p>.</span><span class=n>node_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=n>SKIP</span><span class=w> </span><span class=err>$</span><span class=n>skip</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>LIMIT</span><span class=w> </span><span class=err>$</span><span class=k>limit</span><span class=w>
</span></span></span></code></pre></div><p>And the second method loads the source and target node IDs for all outgoing relationships starting any of the nodes in the batch:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>n</span><span class=p>)</span><span class=c1>--&gt;(m)
</span></span></span><span class=line><span class=cl><span class=c1></span><span class=k>WHERE</span><span class=w> </span><span class=n>n</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>IN</span><span class=w> </span><span class=k>CAST</span><span class=p>(</span><span class=err>$</span><span class=n>nodes</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>INT64</span><span class=p>[])</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=n>n</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>source_id</span><span class=p>,</span><span class=w> </span><span class=n>m</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>target_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>ORDER</span><span class=w> </span><span class=k>BY</span><span class=w> </span><span class=n>source_id</span><span class=p>,</span><span class=w> </span><span class=n>target_id</span><span class=w>
</span></span></span></code></pre></div><p>We can then create the HNSW indexes, dropping any existing indexes automatically, by running:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>dlctl graph reindex <span class=s2>&#34;music_taste&#34;</span>
</span></span></code></pre></div><p>To make this possible, the previous command relies on <code>show_tables()</code>, <code>table_info()</code>, <code>show_indexes()</code>, <code>drop_vector_index()</code> and <code>create_vector_index()</code>, all of which are individually called and arguments are passed from functions like <code>show_tables()</code> to <code>table_index()</code> strictly via f-strings—since variables are not supported with <code>CALL</code>, this needs to be done programmatically. Check out the full <a href=https://github.com/DataLabTechTV/datalab/blob/v0.3.0/graph/ops.py#L272 target=_blank>reindex_embeddings</a> methods to learn the details.</p><p>The whole process takes approximately 20m to run for the <code>music_taste</code> graph.</p><h2 class="relative group">GraphRAG Chain<div id=graphrag-chain class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#graphrag-chain aria-label=Anchor>#</a></span></h2><p>We use two LLM models to support our operations: <a href=https://ollama.com/library/phi4 target=_blank>phi4</a> and <a href=https://ollama.com/library/gemma3 target=_blank>gemma3</a>. Specifically, we rely on phi4 for tasks that involve following instructions and generating code (cypher), and we use gemma3 to produce user-facing text (the final answer). We tested gemma3 as a general model for all required tasks, replacing phi4 in code generation, but it struggled to generate valid cypher code—syntactically and conceptually. The same goes for several other models as well—phi4 seems to produce the best outcome when it comes to code generation (pending formal evaluation, of course, but I&rsquo;m vibing right now).</p><p>We implemented GraphRAG using <a href=https://www.langchain.com/ target=_blank>LangChain</a>, as a <a href=https://python.langchain.com/api_reference/core/runnables/langchain_core.runnables.base.Runnable.html target=_blank>Runnable</a>, taking advantage of <a href=https://python.langchain.com/docs/integrations/graphs/kuzu_db/ target=_blank>langchain-kuzu</a> by partially reusing some of its components, like the <code>KUZU_GENERATION_PROMPT</code> template, or <code>KuzuGraph</code> for getting a schema to feed to the prompt and to handle graph querying.</p><blockquote><p>📌 Note</p><p>When we decided to implement our workflow using LangChain, we also looked into <a href=https://langchain-ai.github.io/langgraph/concepts/why-langgraph/ target=_blank>LangGraph</a>, to determine whether it could be useful when working with Graph RAG.</p><p>While LangGraph is quite an interesting framework, designed for the orchestration of stateful agents, it does not provide specific tooling for working with graphs—think about graphs in the sense of TensorFlow computational graphs, not graphs like knowledge graphs or social networks. LangGraph supports the integration of LLMs, tools, memory, and other useful features, by settings the conditions under which these components interact.</p><p>Since we didn&rsquo;t need to setup something at this complexity level, we did not use LangGraph here. If you&rsquo;re focusing on stateless Graph RAG, then LangChain is really all you need. In the future, however, we might explore LangGraph, and add state to the implementation we describe here.</p></blockquote><p>Below you&rsquo;ll find a diagram detailing the how the Graph RAG chain works, and covering the three major components: Graph Retriever, Context Assembler, and Answer Generator. The floating rectangles on top, with a filling, are the legend. Each small rectangle inside the three major components is a part of the <a href=https://python.langchain.com/api_reference/core/runnables/langchain_core.runnables.base.RunnableSequence.html target=_blank>RunnableSequence</a> that makes the component. The code that implements the diagram is available under the <a href=https://github.com/DataLabTechTV/datalab/blob/v0.3.0/graph/rag.py target=_blank>graph.rag</a> module—symbol names in the code should match the names in the small rectangles below.</p><div style=position:relative;width:600px;height:1600px><img src=./graphrag-langchain.png style=position:absolute;top:47.5%;left:70%;transform:translate(-60%,-50%)scale(1.25);pointer-events:none></div><h3 class="relative group">Graph Retriever<div id=graph-retriever class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#graph-retriever aria-label=Anchor>#</a></span></h3><p>The Graph Retriever component extracts and maps named entities to nodes in the graph. It takes the <code>user_query</code> as input, which will be passed to the <code>entities_prompt</code> via the <code>entities_prompt_to_kuzu_inputs</code> step.</p><h4 class="relative group">entities_prompt<div id=entities_prompt class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#entities_prompt aria-label=Anchor>#</a></span></h4><p>At first, we tried a zero-shot prompt, but the only way we got a consistent outcome was by providing it an explicit example. Turning our prompt into one-shot was enough to get this to work for our specific graph. While this might not be generalizable—the example we provide is specific to our graph—it is enough to demonstrante an end-to-end pipeline, and it is also closer to what a real-world implementations would do, which are usually designed for a specific use case. This template expects only that the <code>{user_query}</code> slot is replaced.</p><pre wrap>
You are an AI assistant that extracts entities from a given user query using named entity recognition and matches them to nodes in a knowledge graph, returning the node_id properties of those nodes, and nothing more.

Input:
User query: a sentence or question mentioning entities to retrieve from the knowledge graph.

Task:
Extract all relevant entities from the user query as nodes represented by their node_id property.

Rules:
- Only use node properties defined in the schema.
- Use exact property names and values as extracted from the user query.
- If a property value is not specified, do not guess it.
- Ignore user query requests, and just return the node_id property for nodes matching named entities explicitly mentioned in the user query.
- Do not make recommendations. Only return the node_id properties for extracted entities that have a node in the graph.

Example:

If the user mentions Nirvana and there is an artist property on a Track node, then all nodes matching Nirvana should be retrieved as follows:

MATCH (t:Track)
WHERE LOWER(t.artist) = LOWER("Nirvana")
RETURN t.node_id AS node_id;

If, in addition to Nirvana, the user algo mentions the grunge genre, and there is a genre property of a Genre node, then all nodes matching grunge should be added to be previous query as follows:

MATCH (t:Track)
WHERE LOWER(t.artist) = LOWER("Nirvana")
RETURN t.node_id AS node_id

UNION

MATCH (g:Genre)
WHERE LOWER(g.genre) = LOWER("grunge")
RETURN g.node_id AS node_id

User query:
"{user_query}"

---

Here are the node_id properties for all nodes matching the extracted entities:

[Your output here]
</pre><h4 class="relative group">langchain-kuzu<div id=langchain-kuzu class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#langchain-kuzu aria-label=Anchor>#</a></span></h4><p>This is a <a href=https://python.langchain.com/docs/integrations/graphs/kuzu_db/ target=_blank>LangChain integration for KùzuDB</a> that helps you query the graph, automatically taking into account its schema, through this prompt (directly extracted from <a href=https://github.com/kuzudb/langchain-kuzu/blob/v0.4.2/libs/kuzu/langchain_kuzu/chains/graph_qa/prompts.py target=_blank>langchain-kuzu</a>):</p><pre wrap>
You are an expert in translating natural language questions into Cypher statements.
You will be provided with a question and a graph schema.
Use only the provided relationship types and properties in the schema to generate a Cypher
statement.
The Cypher statement could retrieve nodes, relationships, or both.
Do not include any explanations or apologies in your responses.
Do not respond to any questions that might ask anything else than for you to construct a
Cypher statement.

Task: Generate a Cypher statement to query a graph database.

Schema:
{schema}

The question is:
{question}
</pre><p>This means that the final prompt that we pass to our LLM is this prompt with the <code>schema</code> slot replaced by the return value of <code>graph.get_schema</code>—from <code>KuzuGraph</code>, available after calling <code>graph.refresh_schema()</code>—and the <code>{question}</code> slot replaced by our <code>entities_prompt</code> prompt template.</p><h4 class="relative group">Code LLM and KG Query<div id=code-llm-and-kg-query class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#code-llm-and-kg-query aria-label=Anchor>#</a></span></h4><p>The previously generated prompt is passed to the <code>phi4</code> LLM model, running on a local instance of Ollama—this requires 8 GiB VRAM—producing cypher code that will match named entities, extracted from the original user query, to nodes in the knowledge graph.</p><p>As an example, let&rsquo;s consider the following user query:</p><pre wrap>
If I like metal artists like Metallica or Iron Maiden, but also listen to IDM, what other artists and genres could I listen to?
</pre><p>The cypher output produced by the code LLM will look something like this:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sql data-lang=sql><span class=line><span class=cl><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=k>g</span><span class=p>:</span><span class=n>Genre</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=k>g</span><span class=p>.</span><span class=n>genre</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=s2>&#34;metal&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=k>g</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>node_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=n>t</span><span class=p>:</span><span class=n>Track</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=n>t</span><span class=p>.</span><span class=n>artist</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=s2>&#34;Metallica&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=k>OR</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=n>t</span><span class=p>.</span><span class=n>artist</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=s2>&#34;Iron Maiden&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=n>t</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>node_id</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>UNION</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>MATCH</span><span class=w> </span><span class=p>(</span><span class=k>g</span><span class=p>:</span><span class=n>Genre</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>WHERE</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=k>g</span><span class=p>.</span><span class=n>genre</span><span class=p>)</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>LOWER</span><span class=p>(</span><span class=s2>&#34;idm&#34;</span><span class=p>)</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=k>RETURN</span><span class=w> </span><span class=k>g</span><span class=p>.</span><span class=n>node_id</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>node_id</span><span class=w>
</span></span></span></code></pre></div><p>By calling <code>query_graph(shuffle=True, limit=100)</code>, we produce a runnable that will use <code>KuzuGraph</code> to run the generate cypher code, shuffling the output data frame and returning only the first 100 rows—if the user mentions more than 100 entities in the query, this will introduce a cap and some run time predictability.</p><h3 class="relative group">Context Assembler<div id=context-assembler class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#context-assembler aria-label=Anchor>#</a></span></h3><p>The Context Assembler component expands source nodes to nearest neighbors, producing additional context to extend the prompt. It takes the <code>entities</code> data frame of nodes as input, computing nearest-neighbors and finding relevant paths to produce a context. The idea is that this context will guide the LLM into providing a better answer.</p><h4 class="relative group">Approximate Nearest Neighbors<div id=approximate-nearest-neighbors class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#approximate-nearest-neighbors aria-label=Anchor>#</a></span></h4><p>We use ANN to build a context with the top $k$ nodes that are the most similar overall to our source nodes (i.e., directly representing entities mentioned in the user query—for example, if an artist is mentioned, then the tracks for that artist will directly represent it). When a node appears multiple times, for a being NN with multiple source nodes, then the average distance is used to rank that node. Source nodes will be added to an exclusion list, so they will never be returned as a NN, and nodes are only considered up to a maximum distance, so we might return less than $k$-NN.</p><h4 class="relative group">Computing Relevant Paths<div id=computing-relevant-paths class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#computing-relevant-paths aria-label=Anchor>#</a></span></h4><p>Once we return the combined $k$-NN, we compute two types of paths to produce a context:</p><ol><li>Sample of shortest paths between each node representing an entity in the user query, and its nearest neighbors.</li><li>Random length paths departing from nearest neighbors, as a way to profile the neighbors.</li></ol><p>Think of individual relationships in paths as having the value of sentences—e.g., &lsquo;John, a Deezer user, listened to Metallica&rsquo;s Nothing Else Matters track 5 times&rsquo; is represented in our graph by <code>(u:User)-[:ListenedTo]->(t:Track)</code>. While we could convert this into natural language, the LLM already has the ability to understand structured languages like cypher. As such, we use a minimal semi-structured representation to list node properties, and relationships from the selected paths:</p><pre wrap>
Nodes:
Track(node_id=175760, track_id=TRLOVTV128F92E846E, name=Wrathchild, artist=Iron Maiden, year=1981)
Track(node_id=145255, track_id=TRVBEWU128F422E551, name=The Secrets Of Merlin, artist=Grave Digger, year=1999)
Genre(node_id=1156680, genre=Indie Rock)
Track(node_id=188155, track_id=TRGNOEX128F4265F3E, name=Snap Your Fingers, Snap Your Neck, artist=Prong, year=2014)
...
User(node_id=56121, user_id=36144, source=Deezer, country=RO)
User(node_id=114060, user_id=3007, source=Deezer, country=HU)
Genre(node_id=1156733, genre=Metal)
Genre(node_id=1156613, genre=Thrash Metal)

Relationships:
({ node_id: 175888 })-[:Tagged]-({ node_id: 1156613 })
({ node_id: 1156613 })-[:Tagged]-({ node_id: 192487 })
({ node_id: 113118 })-[:Likes]-({ node_id: 1156680 })
...
({ node_id: 175760 })-[:ListenedTo {play_count=3}]-({ node_id: 200466 })
({ node_id: 175748 })-[:Tagged]-({ node_id: 1156613 })
({ node_id: 1156733 })-[:Likes]-({ node_id: 122589 })
...
({ node_id: 53808 })-[:Friend]-({ node_id: 114060 })
...
</pre><h3 class="relative group">Answer Generation<div id=answer-generation class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#answer-generation aria-label=Anchor>#</a></span></h3><p>The text output from the previous component will be fed to the chat LLM, as context within its prompt, and a final answer will be produced by the <code>gemma3</code> model running on the local instance of Ollama:</p><pre wrap>
Based on your interest in metal artists like Metallica and Iron Maiden, as well as your enjoyment of IDM (Intelligent Dance Music), you might appreciate exploring a blend of genres that incorporate complex rhythms, intricate compositions, and experimental sounds. Here are some suggestions for artists and genres to explore:

#### Artists:
1. **Meshuggah**: Known for their technical proficiency and polyrhythms, Meshuggah blends elements of metal with progressive and avant-garde influences.
2. **Opeth**: This band combines death metal with progressive rock and folk music, offering complex compositions that might appeal to your taste in IDM.
3. **Gojira**: With a focus on environmental themes and technical musicianship, Gojira's sound is both heavy and intricate.
4. **Tool**: Known for their complex rhythms and philosophical lyrics, Tool blends metal with progressive rock and experimental elements.
5. **Cynic**: A band that merges death metal with jazz fusion and ambient music, creating a unique and cerebral listening experience.

#### Genres:
1. **Progressive Metal**: This genre often features complex song structures, time signature changes, and intricate instrumental work, similar to the complexity found in IDM.
2. **Technical Death Metal**: Known for its fast tempos, complex guitar riffs, and precise drumming, this subgenre offers a challenging listening experience.
3. **Avant-Garde Metal**: This genre pushes the boundaries of traditional metal with experimental sounds and unconventional song structures.
4. **Math Rock**: Characterized by odd time signatures and syncopated rhythms, math rock shares some similarities with IDM in terms of complexity and structure.

#### Additional Recommendations:
- **Djent**: A subgenre of progressive metal known for its heavy use of palm-muted, low-pitched guitar riffs and complex rhythms.
- **Neoclassical Metal**: Combines elements of classical music with metal, often featuring virtuosic guitar solos and orchestral arrangements.

Exploring these artists and genres can provide a rich listening experience that bridges your interests in metal and IDM.
</pre><p>And that&rsquo;s it! There&rsquo;s one way to do GraphRAG while actually taking advantage of the graph structure, despite its lower efficiency.</p><h3 class="relative group">Final Remarks<div id=final-remarks class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#final-remarks aria-label=Anchor>#</a></span></h3><p>Keep in mind that this was an experiment! For production, I would still rely on text embeddings for to compute node vectors. This will enable us to directly embed a user query into the same vector space, and match it to nodes in the knowledge graph, while seamlessly expanding the context to nodes other than the named entities—we match semantically similar nodes rather than the exact entities mentioned in the user query It&rsquo;s a lot less overhead, if we rely purely on text.</p><p>When running graph algorithms based on the NN nodes is required—e.g., traversals or clustering that dynamically depend on those source nodes—then stick with GraphRAG. When you simply don&rsquo;t need to run computations on the graph, then just use plain RAG based on a vector store, although we KùzuDB you essentially get both.</p><h2 class="relative group">KùzuDB Consumer Notes<div id=k%C3%B9zudb-consumer-notes class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#k%C3%B9zudb-consumer-notes aria-label=Anchor>#</a></span></h2><p>To close this study, I&rsquo;ll share a few of my notes, that I took as I was working on this project, starting with a few quick highlights on data types and functions, and then providing: a wishlist, with features I missed or would like KùzuDB to support; a snags list, with small annoyances that I hit during development; and a bugs list, with a few issues I found, some of them already resolved, while others that might require further investigation.</p><h3 class="relative group">Data Types and Functions<div id=data-types-and-functions class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#data-types-and-functions aria-label=Anchor>#</a></span></h3><p>KùzuDB provides several specialized data types and functions, some of them similar to DuckDB, while others unique to kuzu or specific to graphs, Below, I list some of my favorites, as I went through the docs:</p><ul><li><strong>Lists</strong> – with arrays being a special case of lists.</li><li><strong>Arrays</strong> – focusing on vector distance and similarity functions.</li><li><strong>Maps</strong> and <strong>Structs</strong> – maps/dictionaries, with added access options via struct operators (i.e., <code>my_map.my_field</code>).</li><li><strong>Recursive Relationships</strong> – node, edge and property accessors for paths, but also functions to test the trail or acyclic properties of paths, or to measure length and cost.</li><li><strong>Text</strong> – several standard text utilities (e.g., <code>initcap</code> for title case), also provides a <code>levenshtein</code> implementation for string similarity.</li><li><strong>Unions</strong> – makes it possible for multiple data types to be stored in the same column.</li></ul><h3 class="relative group">Wishlist<div id=wishlist class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#wishlist aria-label=Anchor>#</a></span></h3><ol><li>Integration with <a href=https://docs.getdbt.com/ target=_blank>dbt</a> 🙏🏻 — there is already a <a href=https://github.com/duckdb/dbt-duckdb target=_blank>dbt-duckdb</a>, so this would fit nicely with the workflow (DuckDB for ETL and analytics, and KuzuDB for graph data science).</li><li>No support for <code>S3_USE_SSL</code>, which makes it hard to access object storage setup for testing (had to create a <code>boto3</code> wrapper based on temporary files).</li><li>In <code>kuzu</code> CLI, a query terminating with <code>;</code> should always run when <code>RETURN</code> is pressed, like DuckDB does, even in <code>:multiline</code> mode. And <code>:singleline</code> mode should actually be single line—pasting might convert new lines to spaces. Alternatively, there could be a secondary shortcut, like <code>Shift+Enter</code>, that would run the query regardless of where the cursor is.</li><li>Having better schema introspection for edge tables with <code>table_info()</code> would be useful—specifically, showing information about <code>FROM</code> and <code>TO</code>.</li><li>Calling functions using variables and parameters instead of just literals would also be appreciated, e.g., <code>table_info()</code>.</li><li>Altering a column&rsquo;s type is essential, for a schema-full graph database—a practical example was when creating a vector index over a <code>DOUBLE[]</code>, without a fixed dimension, and it wouldn&rsquo;t work.</li><li>It would be nice if KùzuDB Explorer supported multitenancy—e.g., I&rsquo;d like to be able to provide a read-only graph catalog to my data scientists.</li><li>A catalog of node embedding algorithms would be appreciated as well—I had to implement my own Fast Random Projection. I didn&rsquo;t use <a href=https://pyg.org/ target=_blank>PyG</a>, but considered it—something to look forward to, in the future, for sure.</li><li>A <code>rand()</code> cypher function and a random walk algorithm, maybe using pattern matching—both are essential for sampling the graph in different ways. Random walks need to be efficient, so implementing this using cypher, in python, is not the best idea, unless absolutely necessary. This is a fundamental feature for an OLAP graph database!</li></ol><h3 class="relative group">Snags<div id=snags class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#snags aria-label=Anchor>#</a></span></h3><ol><li>While having <code>NODE</code> and <code>REL</code> tables with a fixed schema is interesting, this also limits operations a bit. For example, we cannot create an embeddings index over nodes of different types, as KùzuDB does not support multi-labelled nodes.<ul><li>Having to create individual indexes still works, but it makes it harder to generalize APIs—e.g., in Neo4j I&rsquo;d use something like a <code>base</code> node label where all nodes of this type were expected to have a specific set of properties, like <code>embedding</code>—but, on Kuzu, I&rsquo;ll need to know all relevant node types and also create and query $N$ separate vector indexes, one for each node type.</li></ul></li><li>&ldquo;Current Pipeline Progress&rdquo; stuck at 0% until completed for many cases—tested in KùzuDB Explorer, e.g., <code>CALL create_vector_index(...)</code>. This is not as useful as it could be—it needs more granularity.</li><li>Creating vector indexes requires fixed size arrays, created with <code>DOUBLE[n]</code> or <code>FLOAT[n]</code>, but this is not clear from the docs. Spent a couple of hours computing embeddings only to find they couldn&rsquo;t be indexed—also, the error wasn&rsquo;t clear, telling me it only worked with <code>DOUBLE[]</code> or <code>FLOAT[]</code>, which I was using, but not with fixed size.</li><li>Functions like <code>show_indexes()</code> have column names with a space—why not just use an underscore, instead of making me use backticks?</li><li>There is no real support for subqueries—something like <code>CALL { ... }</code> in Neo4j.</li></ol><h3 class="relative group">Bugs<div id=bugs class=anchor></div><span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#bugs aria-label=Anchor>#</a></span></h3><ol><li>When <code>SKIP</code> is over the maximum number of records, the query will never return and a CPU core will be maxed out <em>ad aeternum</em>.</li><li>There was a bug with <code>COPY</code>, when running twice for the same table, with different data. This was reported via Discord, and the team promptly confirmed it was in fact a bug and fixed it (<a href=https://github.com/kuzudb/kuzu/pull/5534 target=_blank>PR #5534</a>).</li><li>When creating a vector index, then dropping it and recreating, it will sometimes fail with what seems to be an upper/lower-case related bug, e.g.:<ul><li><code>Error: Binder exception: _1_genre_embedding_idx_UPPER already exists in catalog</code></li><li>According to one of the devs, a workaround is to run <code>CALL enable_internal_catalog=true;</code> and then manually drop any tables that should have been dropped along with the index.</li><li>This unblocked me, but the issue was also reported and should be fixed in a future version—I was using <code>0.10.0</code>.</li></ul></li><li>For <code>UNION</code> queries, the final <code>ORDER</code> statement should affect the global result, not just the last statement—either that, or add support for subqueries.</li></ol></div><div class="flex author"><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Data Lab Tech" src=/img/avatar_hu14365428751860151861.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Data Lab Tech</div><div class="text-sm text-neutral-700 dark:text-neutral-400"><a href=https://youtube.com/@DataLabTechTV target=_blank>https://youtube.com/@DataLabTechTV</a></div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://youtube.com/@DataLabTechTV target=_blank aria-label=Youtube rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 576 512"><path fill="currentcolor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78.0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://bsky.app/profile/datalabtechtv.com target=_blank aria-label=Bluesky rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/DataLabTechTV target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://discord.gg/6xpe827ANZ target=_blank aria-label=Discord rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 640 512"><path fill="currentcolor" d="M524.531 69.836a1.5 1.5.0 00-.764-.7A485.065 485.065.0 00404.081 32.03a1.816 1.816.0 00-1.923.91 337.461 337.461.0 00-14.9 30.6 447.848 447.848.0 00-134.426.0 309.541 309.541.0 00-15.135-30.6 1.89 1.89.0 00-1.924-.91A483.689 483.689.0 00116.085 69.137a1.712 1.712.0 00-.788.676C39.068 183.651 18.186 294.69 28.43 404.354a2.016 2.016.0 00.765 1.375A487.666 487.666.0 00176.02 479.918a1.9 1.9.0 002.063-.676A348.2 348.2.0 00208.12 430.4a1.86 1.86.0 00-1.019-2.588 321.173 321.173.0 01-45.868-21.853 1.885 1.885.0 01-.185-3.126c3.082-2.309 6.166-4.711 9.109-7.137a1.819 1.819.0 011.9-.256c96.229 43.917 200.41 43.917 295.5.0a1.812 1.812.0 011.924.233c2.944 2.426 6.027 4.851 9.132 7.16a1.884 1.884.0 01-.162 3.126 301.407 301.407.0 01-45.89 21.83 1.875 1.875.0 00-1 2.611 391.055 391.055.0 0030.014 48.815 1.864 1.864.0 002.063.7A486.048 486.048.0 00610.7 405.729a1.882 1.882.0 00.765-1.352C623.729 277.594 590.933 167.465 524.531 69.836zM222.491 337.58c-28.972.0-52.844-26.587-52.844-59.239S193.056 219.1 222.491 219.1c29.665.0 53.306 26.82 52.843 59.239.0 32.654-23.41 59.241-52.843 59.241zm195.38.0c-28.971.0-52.843-26.587-52.843-59.239S388.437 219.1 417.871 219.1c29.667.0 53.307 26.82 52.844 59.239.0 32.654-23.177 59.241-52.844 59.241z"/></svg>
</span></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=mailto:mail@datalabtechtv.com target=_blank aria-label=Email rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg></span></span></a></div></div></div></div><div class=mb-10></div><section class="flex flex-row flex-wrap justify-center pt-4 text-xl"><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;title=GraphRAG%20with%20K%c3%b9zuDB" title="Share on LinkedIn" aria-label="Share on LinkedIn"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://bsky.app/intent/compose?text=GraphRAG%20with%20K%c3%b9zuDB+https://datalabtechtv.com/posts/graphrag-with-kuzudb/" title="Post on Bluesky" aria-label="Post on Bluesky"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M256 232.562c-21.183-41.196-78.868-117.97-132.503-155.834-51.378-36.272-70.978-29.987-83.828-24.181-14.872 6.72-17.577 29.554-17.577 42.988.0 13.433 7.365 110.138 12.169 126.281 15.873 53.336 72.376 71.358 124.413 65.574 2.66-.395 5.357-.759 8.089-1.097-2.68.429-5.379.796-8.089 1.097-76.259 11.294-143.984 39.085-55.158 137.972C201.224 526.527 237.424 403.67 256 341.379c18.576 62.291 39.972 180.718 150.734 83.983 83.174-83.983 22.851-126.674-53.408-137.969-2.71-.302-5.409-.667-8.089-1.096 2.732.337 5.429.702 8.089 1.096 52.037 5.785 108.54-12.239 124.413-65.574 4.804-16.142 12.169-112.847 12.169-126.281.0-13.434-2.705-36.267-17.577-42.988-12.85-5.806-32.45-12.09-83.829 24.181C334.868 114.595 277.183 191.366 256 232.562z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://s2f.kytta.dev/?text=GraphRAG%20with%20K%c3%b9zuDB%20https://datalabtechtv.com/posts/graphrag-with-kuzudb/" title aria-label><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M433 179.11c0-97.2-63.71-125.7-63.71-125.7-62.52-28.7-228.56-28.4-290.48.0.0.0-63.72 28.5-63.72 125.7.0 115.7-6.6 259.4 105.63 289.1 40.51 10.7 75.32 13 103.33 11.4 50.81-2.8 79.32-18.1 79.32-18.1l-1.7-36.9s-36.31 11.4-77.12 10.1c-40.41-1.4-83-4.4-89.63-54a102.54 102.54.0 01-.9-13.9c85.63 20.9 158.65 9.1 178.75 6.7 56.12-6.7 105-41.3 111.23-72.9 9.8-49.8 9-121.5 9-121.5zm-75.12 125.2h-46.63v-114.2c0-49.7-64-51.6-64 6.9v62.5h-46.33V197c0-58.5-64-56.6-64-6.9v114.2H90.19c0-122.1-5.2-147.9 18.41-175 25.9-28.9 79.82-30.8 103.83 6.1l11.6 19.5 11.6-19.5c24.11-37.1 78.12-34.8 103.83-6.1 23.71 27.3 18.4 53 18.4 175z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://reddit.com/submit/?url=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;resubmit=true&amp;title=GraphRAG%20with%20K%c3%b9zuDB" title="Submit to Reddit" aria-label="Submit to Reddit"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M201.5 305.5c-13.8.0-24.9-11.1-24.9-24.6.0-13.8 11.1-24.9 24.9-24.9 13.6.0 24.6 11.1 24.6 24.9.0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4.0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7.0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9.0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5.0 52.6 59.2 95.2 132 95.2 73.1.0 132.3-42.6 132.3-95.2.0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6.0-2.2-2.2-6.1-2.2-8.3.0-2.5 2.5-2.5 6.4.0 8.6 22.8 22.8 87.3 22.8 110.2.0 2.5-2.2 2.5-6.1.0-8.6-2.2-2.2-6.1-2.2-8.3.0zm7.7-75c-13.6.0-24.6 11.1-24.6 24.9.0 13.6 11.1 24.6 24.6 24.6 13.8.0 24.9-11.1 24.9-24.6.0-13.8-11-24.9-24.9-24.9z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://www.facebook.com/sharer/sharer.php?u=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;quote=GraphRAG%20with%20K%c3%b9zuDB" title="Share on Facebook" aria-label="Share on Facebook"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="mailto:?body=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;subject=GraphRAG%20with%20K%c3%b9zuDB" title="Send via email" aria-label="Send via email"><span class="relative block icon"><svg viewBox="0 0 512 512"><path fill="currentcolor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1-27.64 140.9 68.65 266.2 199.1 285.1 19.01 2.888 36.17-12.26 36.17-31.49l1e-4-.6631c0-15.74-11.44-28.88-26.84-31.24-84.35-12.98-149.2-86.13-149.2-174.2.0-102.9 88.61-185.5 193.4-175.4 91.54 8.869 158.6 91.25 158.6 183.2v16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98.0036c-7.299.0-13.2 4.992-15.12 11.68-24.85-12.15-54.24-16.38-86.06-5.106-38.75 13.73-68.12 48.91-73.72 89.64-9.483 69.01 43.81 128 110.9 128 26.44.0 50.43-9.544 69.59-24.88 24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3c0-149.2-133.9-265.632-287.3-235.57zM239.1 304.3c-26.47.0-48-21.56-48-48.05s21.53-48.05 48-48.05 48 21.56 48 48.05-20.6 48.05-48 48.05z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://api.whatsapp.com/send?text=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;resubmit=true&amp;title=GraphRAG%20with%20K%c3%b9zuDB" title="Share via WhatsApp" aria-label="Share via WhatsApp"><span class="relative block icon"><svg viewBox="0 0 448 512"><path fill="currentcolor" d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4.0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3.0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.2.0-65.7-8.9-94-25.7l-6.7-4-69.8 18.3L72 359.2l-4.4-7c-18.5-29.4-28.2-63.3-28.2-98.2.0-101.7 82.8-184.5 184.6-184.5 49.3.0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5.0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8s-14.3 18-17.6 21.8c-3.2 3.7-6.5 4.2-12 1.4-32.6-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2s-9.7 1.4-14.8 6.9c-5.1 5.6-19.4 19-19.4 46.3.0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/></svg>
</span></a><a target=_blank class="m-1 rounded bg-neutral-300 p-1.5 text-neutral-700 hover:bg-primary-500 hover:text-neutral dark:bg-neutral-700 dark:text-neutral-300 dark:hover:bg-primary-400 dark:hover:text-neutral-800" href="https://t.me/share/url?url=https://datalabtechtv.com/posts/graphrag-with-kuzudb/&amp;resubmit=true&amp;title=GraphRAG%20with%20K%c3%b9zuDB" title="Share via Telegram" aria-label="Share via Telegram"><span class="relative block icon"><svg viewBox="0 0 496 512"><path fill="currentcolor" d="M248 8C111.033 8 0 119.033.0 256S111.033 504 248 504 496 392.967 496 256 384.967 8 248 8zM362.952 176.66c-3.732 39.215-19.881 134.378-28.1 178.3-3.476 18.584-10.322 24.816-16.948 25.425-14.4 1.326-25.338-9.517-39.287-18.661-21.827-14.308-34.158-23.215-55.346-37.177-24.485-16.135-8.612-25 5.342-39.5 3.652-3.793 67.107-61.51 68.335-66.746.153-.655.3-3.1-1.154-4.384s-3.59-.849-5.135-.5q-3.283.746-104.608 69.142-14.845 10.194-26.894 9.934c-8.855-.191-25.888-5.006-38.551-9.123-15.531-5.048-27.875-7.717-26.8-16.291q.84-6.7 18.45-13.7 108.446-47.248 144.628-62.3c68.872-28.647 83.183-33.623 92.511-33.789 2.052-.034 6.639.474 9.61 2.885a10.452 10.452.0 013.53 6.716A43.765 43.765.0 01362.952 176.66z"/></svg></span></a></section></div><script>var oid="views_posts/graphrag-with-kuzudb/index.md",oid_likes="likes_posts/graphrag-with-kuzudb/index.md"</script><script type=text/javascript src=/js/page.min.0860cf4e04fa2d72cc33ddba263083464d48f67de06114529043cb4623319efed4f484fd7f1730df5abea0e2da6f3538855634081d02f2d6e920b956f063e823.js integrity="sha512-CGDPTgT6LXLMM926JjCDRk1I9n3gYRRSkEPLRiMxnv7U9IT9fxcw31q+oOLabzU4hVY0CB0C8tbpILlW8GPoIw=="></script></section><footer class="pt-8 max-w-prose print:hidden"><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group mr-3" href=/posts/automated-semantic-releases/><span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Automated Semantic Releases on GitHub</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-07-08T12:00:00+01:00>8 July 2025</time>
</span></span></a></span><span><a class="flex text-right group ml-3" href=/posts/economic-competition-networks/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Economic Competition Networks</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime=2025-08-06T17:00:00+01:00>6 August 2025</time>
</span></span><span class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div id=top-scroller class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0"><a href=#the-top class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer id=site-footer class="py-10 mt-8 print:hidden"><nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400"><ul class="flex flex-col list-none sm:flex-row"><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/privacy/ title>Privacy</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center" href=/cookies/ title>Cookies</a></li><li class="flex mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a id=reset-cookie-options class="decoration-primary-500 flex items-center" href=# title="Reset Cookie Options"><span class=mr-1>🍪</span></a></li></ul></nav><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2026
Data Lab Tech</p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh+sCQ0E53ghYrxgYqw+0GCRyIEpA=="></script><script src=/js/search-keybind.min.b0547e1bcfb3922a05d78728999bbd36902e6c52a31b0b1efa373df47c6fa095.js integrity="sha256-sFR+G8+zkioF14comZu9NpAubFKjGwse+jc99HxvoJU=" crossorigin=anonymous></script><script src=/js/cookie-banner.min.010e183607b0d0550c6b0c6cdfee0ef6a8251e4995f06db7c9541c7a847f9751.js integrity="sha256-AQ4YNgew0FUMawxs3+4O9qglHkmV8G23yVQceoR/l1E=" crossorigin=anonymous></script><div id=cookie-spacer class="h-12 hidden"></div><div id=cookie-banner class="fixed inset-x-0 bottom-0 z-[90] hidden"><div class="opacity-90 backdrop-blur-2xl shadow-2xl px-4 py-4 text-sm text-white dark:text-neutral-100"><div class="max-w-[64rem] mx-auto flex flex-wrap items-center justify-between gap-4"><span>We use cookies to enhance your experience.
<a href=/privacy/ class="underline text-blue-300 hover:text-blue-100 ml-1">Learn more</a>.</span><div class="flex gap-4 shrink-0"><button id=cookie-decline class="font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer">
Decline
</button>
<button id=cookie-accept class="font-medium text-gray-500 hover:text-primary-600 dark:hover:text-primary-400 cursor-pointer">
Accept</button></div></div></div></div><script type=module>
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
        startOnLoad: true,
        theme: "base",
        themeCSS: `
          /* Left-align text in class diagrams */
          .nodeLabel {
            text-wrap: nowrap;
          }
        `,
        flowchart: {
            nodeSpacing: 20,
            rankSpacing: 100,
        },
        themeVariables: {
            fontFamily: 'var(--default-mono-font-family, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace)',
            fontSize: "1.5em",

            background: "#1e1e1e",
            textColor: "#f8fafc",
            primaryColor: "#0ea5e9",
            tertiaryColor: "#f8fafc",
            primaryTextColor: "#1e1e1e",
            lineColor: "#94a3b8",
            noteBkgColor: "#2c3a4a",

             
            nodeBorder: "#38bdf8",
            clusterBkg: "#2c3a4a",
            clusterBorder: "#4b5563",

             
            actorTextColor: "#f8fafc",
            loopTextColor: "#f8fafc",

             
            tagLabelFontSize: ".6em",
            commitLabelFontSize: ".6em",
            commitLabelColor: "#f8fafc",
            commitLabelBackground: "#2c3a4a",
            git0: "#0ea5e9",
            git1: "#4b5563",
        }
    });
</script></footer><div id=search-wrapper class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh]" data-url=https://datalabtechtv.com/ style=z-index:500><div id=search-modal class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800"><header class="relative z-10 flex items-center justify-between flex-none px-2"><form class="flex items-center flex-auto min-w-0"><div class="flex items-center justify-center w-8 h-8 text-neutral-400"><span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" viewBox="0 0 512 512"><path fill="currentcolor" d="M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9.0 208 0S0 93.1.0 208s93.1 208 208 208c48.3.0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9.0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7.0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7.0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg></span></div><input type=search id=search-query class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent" placeholder=Search tabindex=0></form><button id=close-search-button class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400" title="Close (Esc)">
<span class="relative block icon"><svg viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></button></header><section class="flex-auto px-2 overflow-auto"><ul id=search-results></ul></section></div></div></div></body></html>